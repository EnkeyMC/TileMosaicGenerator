(this["webpackJsonptile-mosaic-generator"]=this["webpackJsonptile-mosaic-generator"]||[]).push([[0],{151:function(e,t,n){},344:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),i=n(40),s=n.n(i),l=(n(151),n(16)),o=n(11),j=function(e){return Object(c.jsxs)("div",{className:"fullscreen-layout",children:[Object(c.jsx)("div",{className:"fullscreen-layout__header",children:e.header}),Object(c.jsx)("div",{className:"fullscreen-layout__content",children:e.children}),Object(c.jsx)("div",{className:"fullscreen-layout__footer",children:e.footer})]})},u=n(6),d={MAJOR:0,MINOR:1},b=function(e){return{version:d,tiles:e.tiles,generator:e.generator,palette:e.palette}},O=n(8);function h(e,t,n){var c=Array.from(e),r=c.splice(t,1),a=Object(O.a)(r,1)[0];return c.splice(n,0,a),c}function f(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}var x=function(){var e=Object(u.d)(b),t=Object(r.useCallback)((function(t){t.preventDefault(),t.stopPropagation(),f("TMG-"+(new Date).toISOString()+".json",JSON.stringify(e))}),[e]);return Object(c.jsxs)("nav",{className:"navbar is-info",role:"navigation","aria-label":"main navigation",children:[Object(c.jsx)("div",{className:"navbar-brand",children:Object(c.jsxs)("h1",{className:"navbar-item is-flex-direction-column",children:[Object(c.jsx)("span",{className:"title is-4 mb-4 has-text-white",children:"Tile Mosaic"}),Object(c.jsx)("span",{className:"subtitle is-6 is-uppercase is-bold has-text-light",children:"Generator"})]})}),Object(c.jsxs)("div",{className:"navbar-menu",children:[Object(c.jsxs)("div",{className:"navbar-start",children:[Object(c.jsx)(l.b,{to:"/",exact:!0,className:"navbar-item",activeClassName:"is-active",children:"Generator"}),Object(c.jsx)(l.b,{to:"/tiles",className:"navbar-item",activeClassName:"is-active",children:"Tiles"})]}),Object(c.jsxs)("div",{className:"navbar-end",children:[Object(c.jsxs)("a",{href:"#",onClick:t,className:"navbar-item ml-3",children:[Object(c.jsx)("span",{className:"icon mr-1",children:Object(c.jsx)("i",{className:"fas fa-file-export"})}),"Export project"]}),Object(c.jsxs)(l.b,{to:"/import",className:"navbar-item",activeClassName:"is-active",children:[Object(c.jsx)("span",{className:"icon mr-1",children:Object(c.jsx)("i",{className:"fas fa-file-import"})}),"Import project"]}),Object(c.jsxs)(l.b,{to:"/help",className:"navbar-item",activeClassName:"is-active",children:[Object(c.jsx)("span",{className:"icon mr-1",children:Object(c.jsx)("i",{className:"fas fa-question-circle"})}),"Help"]})]})]})]})},v=function(){return Object(c.jsx)("footer",{className:"has-background-light p-3",children:Object(c.jsx)("div",{className:"content has-text-centered",children:Object(c.jsxs)("p",{className:"has-text-grey is-size-7",children:[Object(c.jsx)("i",{children:"Tile Mosaic Generator"})," is created by Martin Omacht as a project for VIN course at Brno University of Technology in 2021. (Version: ",d.MAJOR,".",d.MINOR,")"]})})})},p=n(7),m=n(13),N=n(19),y=n(22),k=n(21),C=Object(p.a)("error-boundary"),g=function(e){Object(y.a)(n,e);var t=Object(k.a)(n);function n(e){var c;return Object(m.a)(this,n),(c=t.call(this,e)).state={hasError:!1},c}return Object(N.a)(n,[{key:"componentDidCatch",value:function(e,t){console.error(e,t)}},{key:"render",value:function(){var e;return this.state.hasError?Object(c.jsx)("div",{className:C(),children:Object(c.jsxs)("div",{className:C("content"),children:[Object(c.jsx)("h2",{className:"title is-3 has-text-danger",children:"Error occurred"}),Object(c.jsx)("p",{children:"Error occurred during render of this component."})]})}):null!==(e=this.props.children)&&void 0!==e?e:null}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(a.a.Component),E=Object(p.a)("panel-layout"),I=function(e){var t=e.horizontal;return Object(c.jsxs)("div",{className:E({horizontal:t,vertical:!t}),children:[Object(c.jsx)("div",{className:E("side"),children:Object(c.jsx)(g,{children:e.left})}),Object(c.jsx)("div",{className:E("content"),children:Object(c.jsx)(g,{children:e.children})}),Object(c.jsx)("div",{className:E("side"),children:Object(c.jsx)(g,{children:e.right})})]})},T="EDITOR_ADD_SHAPE",L="EDITOR_SET_GRID",S="EDITOR_SELECT_SHAPE",P="EDITOR_SELECT_TOOL",R="EDITOR_ELEM_PROP_CHANGE",w="EDITOR_SET_ELEMENTS",_="EDITOR_DELETE_ELEMENT",M="EDITOR_CLEAR";function Y(e){return{type:T,shape:e}}function A(e){return{type:S,idx:e}}function G(e){return{type:P,tool:e}}function D(e){return{type:w,elements:e}}var H,F=n(9);!function(e){e[e.CREATOR=0]="CREATOR",e[e.MANIPULATOR=1]="MANIPULATOR"}(H||(H={}));var W,z=function(){function e(){Object(m.a)(this,e)}return Object(N.a)(e,[{key:"onClick",value:function(e,t,n){return e}},{key:"onMouseMove",value:function(e,t,n){return e}},{key:"onMouseLeave",value:function(e,t,n){return e}},{key:"onShapeClick",value:function(e,t,n,c){return e}},{key:"onFinish",value:function(e,t){return e}},{key:"renderShape",value:function(e){return null}},{key:"toolType",value:function(){return H.CREATOR}},{key:"showHoverPoint",value:function(){return!0}}]),e}(),q=function(e){Object(y.a)(n,e);var t=Object(k.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"onClick",value:function(e,t,n){return t(A(null)),e}},{key:"onShapeClick",value:function(e,t,n,c){return t(A(n)),e}},{key:"showHoverPoint",value:function(){return!1}},{key:"toolType",value:function(){return H.MANIPULATOR}},{key:"getInitialState",value:function(){return{}}}]),n}(z),J=n(2);!function(e){e[e.INTEGER=0]="INTEGER",e[e.FLOAT=1]="FLOAT",e[e.POINT=2]="POINT",e[e.COLOR=3]="COLOR"}(W||(W={}));var B,U,V=function(e){return function(t){return t&&t<e?"Minimum is ".concat(e):void 0}};!function(e){e.TYPE_CIRCLE="CIRCLE",e.TYPE_LINE="LINE",e.TYPE_POLYGON="POLYGON",e.TYPE_POLYLINE="POLYLINE"}(U||(U={}));var X={strokeWidth:{label:"Stroke width",type:W.FLOAT,validators:[V(0)]},strokeColorId:{label:"Stroke color",type:W.COLOR}},$={fillColorId:{label:"Fill color",type:W.COLOR}},K=Object(J.a)(Object(J.a)({center:{label:"Center",type:W.POINT,required:!0},r:{label:"Radius",type:W.FLOAT,required:!0}},$),X),Q=Object(J.a)({point1:{label:"Start point",type:W.POINT,required:!0},point2:{label:"End point",type:W.POINT,required:!0}},X),Z=Object(J.a)(Object(J.a)({},X),$),ee=X,te=(B={},Object(F.a)(B,U.TYPE_LINE,Q),Object(F.a)(B,U.TYPE_POLYGON,Z),Object(F.a)(B,U.TYPE_POLYLINE,ee),Object(F.a)(B,U.TYPE_CIRCLE,K),B),ne=function(e){return function(t){return null===e?void 0:t.palette[e]}},ce=function(e){return e.palette},re="#3298dc",ae=function(e){var t,n=e.line,r=e.selected,a=Object(u.d)(ne(n.strokeColorId)),i=r?re:a;return Object(c.jsx)("line",Object(J.a)({x1:n.point1.x,y1:n.point1.y,x2:n.point2.x,y2:n.point2.y,stroke:null!==i&&void 0!==i?i:"none",strokeWidth:null!==(t=n.strokeWidth)&&void 0!==t?t:0},e.eventHandlers))},ie=function(e){var t,n=e.polyline,r=e.selected,a=Object(u.d)(ne(n.strokeColorId)),i=r?re:a;return Object(c.jsx)("polyline",Object(J.a)({points:n.points.map((function(e){return"".concat(e.x,",").concat(e.y)})).join(" "),stroke:null!==i&&void 0!==i?i:"none",strokeWidth:null!==(t=n.strokeWidth)&&void 0!==t?t:0,fill:"none"},e.eventHandlers))},se=function(e){var t,n=e.circle,r=e.selected,a=Object(u.d)(ne(n.fillColorId)),i=r?re:a,s=Object(u.d)(ne(n.strokeColorId));return Object(c.jsx)("circle",Object(J.a)({cx:n.center.x,cy:n.center.y,r:n.r,fill:null!==i&&void 0!==i?i:"none",stroke:null!==s&&void 0!==s?s:"none",strokeWidth:null!==(t=n.strokeWidth)&&void 0!==t?t:0},e.eventHandlers))},le=function(e){var t,n=e.polygon,r=e.selected,a=Object(u.d)(ne(n.fillColorId)),i=r?re:a,s=Object(u.d)(ne(n.strokeColorId));return Object(c.jsx)("polygon",Object(J.a)({points:n.points.map((function(e){return"".concat(e.x,",").concat(e.y)})).join(" "),fill:null!==i&&void 0!==i?i:"none",stroke:null!==s&&void 0!==s?s:"none",strokeWidth:null!==(t=n.strokeWidth)&&void 0!==t?t:0},e.eventHandlers))},oe=function(e){var t=e.shape;switch(t.type){case U.TYPE_LINE:return Object(c.jsx)(ae,{line:t,eventHandlers:e.eventHandlers,selected:e.selected});case U.TYPE_POLYLINE:return Object(c.jsx)(ie,{polyline:t,eventHandlers:e.eventHandlers,selected:e.selected});case U.TYPE_CIRCLE:return Object(c.jsx)(se,{circle:t,eventHandlers:e.eventHandlers,selected:e.selected});case U.TYPE_POLYGON:return Object(c.jsx)(le,{polygon:t,eventHandlers:e.eventHandlers,selected:e.selected});default:return null}};function je(){var e=0;return{setLastId:function(t){return e=t},getNextId:function(){return++e}}}var ue,de,be=je(),Oe=je(),he=je(),fe=function(e){Object(y.a)(n,e);var t=Object(k.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"onClick",value:function(e,t,n){return e.point1?(t(Y(Object(J.a)(Object(J.a)({},e),{},{id:be.getNextId()}))),this.getInitialState()):Object(J.a)(Object(J.a)({},e),{},{point1:n})}},{key:"onMouseMove",value:function(e,t,n){return e.point1?Object(J.a)(Object(J.a)({},e),{},{point2:n}):e}},{key:"renderShape",value:function(e){return e.point1&&e.point2?Object(c.jsx)(oe,{shape:e}):null}},{key:"getInitialState",value:function(){return{type:U.TYPE_LINE,zIndex:0,strokeColorId:0,strokeWidth:2}}}]),n}(z),xe=n(17),ve=function(e){Object(y.a)(n,e);var t=Object(k.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"onClick",value:function(e,t,n){return Object(J.a)(Object(J.a)({},e),{},{points:e.points.concat(n)})}},{key:"onMouseMove",value:function(e,t,n){var c=Object(xe.a)(e.points);return c.pop(),c.push(n),Object(J.a)(Object(J.a)({},e),{},{points:c})}},{key:"onFinish",value:function(e,t){var n=Object(xe.a)(e.points);return n.pop(),t(Y(Object(J.a)(Object(J.a)({},e),{},{points:n,id:be.getNextId()}))),this.getInitialState()}},{key:"renderShape",value:function(e){return Object(c.jsx)(oe,{shape:e})}},{key:"getInitialState",value:function(){return{type:U.TYPE_POLYLINE,zIndex:0,strokeColorId:0,strokeWidth:2,points:[],id:0}}}]),n}(z),pe=function(e){Object(y.a)(n,e);var t=Object(k.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"onClick",value:function(e,t,n){return e.center?(t(Y(Object(J.a)(Object(J.a)({},e),{},{id:be.getNextId()}))),this.getInitialState()):Object(J.a)(Object(J.a)({},e),{},{center:n})}},{key:"onMouseMove",value:function(e,t,c){return e.center?Object(J.a)(Object(J.a)({},e),{},{r:n.getDistance(e.center,c)}):e}},{key:"renderShape",value:function(e){return e.center&&e.r?Object(c.jsx)(oe,{shape:e}):null}},{key:"getInitialState",value:function(){return{type:U.TYPE_CIRCLE,zIndex:0,fillColorId:0,strokeWidth:null,strokeColorId:null}}}],[{key:"getDistance",value:function(e,t){var n=t.x-e.x,c=t.y-e.y;return Math.sqrt(n*n+c*c)}}]),n}(z),me=function(e){Object(y.a)(n,e);var t=Object(k.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"onClick",value:function(e,t,n){return e.points.length>0&&n.x===e.points[0].x&&n.y===e.points[0].y?this.onFinish(e,t):Object(J.a)(Object(J.a)({},e),{},{points:e.points.concat([n,n])})}},{key:"onMouseMove",value:function(e,t,n){if(0===e.points.length)return e;var c=Object(xe.a)(e.points);return c.pop(),c.push(n),Object(J.a)(Object(J.a)({},e),{},{points:c})}},{key:"onFinish",value:function(e,t){var n=Object(xe.a)(e.points);return n.pop(),t(Y(Object(J.a)(Object(J.a)({},e),{},{points:n,id:be.getNextId()}))),this.getInitialState()}},{key:"renderShape",value:function(e){return Object(c.jsx)(oe,{shape:e})}},{key:"getInitialState",value:function(){return{type:U.TYPE_POLYGON,zIndex:0,fillColorId:0,points:[],strokeColorId:null,strokeWidth:null,id:0}}}]),n}(z);!function(e){e[e.SELECT=0]="SELECT",e[e.LINE=1]="LINE",e[e.POLYLINE=2]="POLYLINE",e[e.CIRCLE=3]="CIRCLE",e[e.POLYGON=4]="POLYGON"}(de||(de={}));var Ne=(ue={},Object(F.a)(ue,de.SELECT,new q),Object(F.a)(ue,de.LINE,new fe),Object(F.a)(ue,de.POLYLINE,new ve),Object(F.a)(ue,de.CIRCLE,new pe),Object(F.a)(ue,de.POLYGON,new me),ue),ye=function(e){return e.editor.gridSize},ke=function(e){return e.editor.elements},Ce=function(e){return e.editor.selectedTool},ge=function(e){return e.editor.selectedIdx},Ee="TILES_SET_TILE",Ie="TILES_DELETE_TILE",Te="TILES_SET_TILES",Le="TILES_DUPLICATE_TILE",Se="TILES_ROTATE";function Pe(e,t){return{type:Se,idx:e,ccw:t}}var Re=Object(p.a)("svg-editor"),we=function(){var e=Object(u.c)(),t=Object(u.d)(Ce),n=Object(u.d)(ke),a=Object(o.f)(),i=Object(o.g)(),s=i.id?parseInt(i.id):null,l=Object(r.useCallback)((function(){var t;e((t={id:null!==s?s:he.getNextId(),elements:n},{type:Ee,tile:t})),a.push("/tiles")}),[n,e,a,s]);return Object(c.jsxs)("div",{className:Re("toolbar"),children:[Object(c.jsx)("button",{className:"button",onClick:l,children:"Save"}),Object(c.jsxs)("div",{className:"buttons has-addons is-centered",children:[Object(c.jsx)("button",{className:"button"+(t===de.SELECT?" is-dark":""),onClick:function(){return e(G(de.SELECT))},children:"Select"}),Object(c.jsx)("button",{className:"button"+(t===de.LINE?" is-dark":""),onClick:function(){return e(G(de.LINE))},children:"Line"}),Object(c.jsx)("button",{className:"button"+(t===de.POLYLINE?" is-dark":""),onClick:function(){return e(G(de.POLYLINE))},children:"Polyline"}),Object(c.jsx)("button",{className:"button"+(t===de.CIRCLE?" is-dark":""),onClick:function(){return e(G(de.CIRCLE))},children:"Circle"}),Object(c.jsx)("button",{className:"button"+(t===de.POLYGON?" is-dark":""),onClick:function(){return e(G(de.POLYGON))},children:"Polygon"})]})]})},_e=Object(p.a)("scrollable"),Me=function(e){return Object(c.jsx)("div",{className:_e(),children:Object(c.jsx)("div",{className:_e("content"),children:e.children})})};function Ye(e){var t=Object(r.useState)(e.value),n=Object(O.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){a(e.value)}),[e.value]),[c,a]}function Ae(e,t,n){var c=Ye(e),a=Object(O.a)(c,2),i=a[0],s=a[1],l=Object(r.useState)(),o=Object(O.a)(l,2),j=o[0],u=o[1],d=Object(r.useCallback)((function(c){if(null===c)return e.required?u("This field is required"):u(void 0),s(c),void e.onChange(c);if(t(c)){s(c);for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];var l=n.apply(void 0,[c].concat(a)),o=l.success,j=l.formatted;o&&e.onChange(j)}}),[s,e.onChange,e.required,n,t]);return[null!==i&&void 0!==i?i:"",null!==j&&void 0!==j?j:e.error,d]}var Ge=function(e){var t=Ae(e,Object(r.useCallback)((function(e){return/^-?\d*$/.test(e)}),[]),Object(r.useCallback)((function(e){var t=parseInt(e,10);return{success:!isNaN(t),formatted:t}}),[])),n=Object(O.a)(t,3),a=n[0],i=n[1],s=n[2],l=Object(r.useCallback)((function(e){var t,n=null!==(t=e.target.value)&&void 0!==t?t:null;s(""===n?null:n)}),[s]);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("input",{type:"number",className:"input",onChange:l,value:a})}),i&&Object(c.jsx)("p",{className:"help is-danger",children:i})]})},De=function(e){var t=Ae(e,Object(r.useCallback)((function(e){return/^-?\d*(\d\.\d*)?$/.test(e)}),[]),Object(r.useCallback)((function(e){var t=parseFloat(e);return{success:!isNaN(t),formatted:t}}),[])),n=Object(O.a)(t,3),a=n[0],i=n[1],s=n[2],l=Object(r.useCallback)((function(e){var t=e.target.value;s(""===t?null:t)}),[s]);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("input",{type:"number",className:"input",onChange:l,value:a,step:"0.1"})}),i&&Object(c.jsx)("p",{className:"help is-danger",children:i})]})},He=function(e){var t,n,a=Object(r.useCallback)((function(t,n){e.onChange(Object(J.a)(Object(J.a)({},e.value),{},Object(F.a)({},t,n)))}),[e.onChange,e.value]);return Object(c.jsxs)("div",{className:"control",children:[Object(c.jsxs)("div",{className:"columns",children:[Object(c.jsxs)("div",{className:"column",children:[Object(c.jsx)("span",{children:"X"}),Object(c.jsx)(De,{onChange:function(e){return a("x",e)},required:e.required,value:null===(t=e.value)||void 0===t?void 0:t.x})]}),Object(c.jsxs)("div",{className:"column",children:[Object(c.jsx)("span",{children:"Y"}),Object(c.jsx)(De,{onChange:function(e){return a("y",e)},required:e.required,value:null===(n=e.value)||void 0===n?void 0:n.y})]})]}),e.error&&Object(c.jsx)("p",{className:"help is-danger",children:e.error})]})},Fe="PALETTE_ADD_COLOR",We="PALETTE_REMOVE_COLOR",ze="PALETTE_UPDATE_COLOR";var qe=n(144),Je=n(67),Be=n(145),Ue="IMPORT_PROJECT";var Ve="#000",Xe={0:Ve};var $e=Object(p.a)("palette-picker"),Ke=function(){return Object(c.jsxs)("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:$e("colornone"),children:[Object(c.jsx)("polyline",{points:"0,0 100,0 100,100 0,100 0,0",stroke:"#000",strokeWidth:"2",fill:"none"}),Object(c.jsx)("line",{x1:"100",y1:"0",x2:"0",y2:"100",stroke:"#000",strokeWidth:"2"}),Object(c.jsx)("line",{x1:"0",y1:"0",x2:"100",y2:"100",stroke:"#000",strokeWidth:"2"})]})},Qe=a.a.forwardRef((function(e,t){var n=e.id,a=e.color,i=e.canEdit,s=e.onDelete,l=e.onSelect,o=e.selected,j=Object(r.useState)(!1),d=Object(O.a)(j,2),b=d[0],h=d[1],f=Object(u.c)(),x=Object(r.useCallback)((function(e){e.stopPropagation(),h(!0)}),[h]),v=Object(r.useCallback)((function(e){e.stopPropagation(),h(!1)}),[h]),p=Object(r.useCallback)((function(e){f(function(e,t){return{type:ze,id:e,color:t}}(n,e.hex))}),[f,n]);return Object(c.jsxs)("div",{ref:t,onClick:function(){return l&&l(n)},className:$e("item",o?["active"]:[]),children:[Object(c.jsxs)("div",{className:$e("info"),children:[Object(c.jsx)("span",{className:$e("thumb"),style:{backgroundColor:a},children:!a&&Object(c.jsx)(Ke,{})}),Object(c.jsx)("span",{className:$e("label"),children:null!==a&&void 0!==a?a:"None"})]}),"number"===typeof n&&Object(c.jsxs)("div",{className:$e("actions"),children:[i&&Object(c.jsx)("button",{onClick:x,className:$e("action",["edit"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-pen"})})}),s&&Object(c.jsx)("button",{onClick:function(){return s(n)},className:$e("action",["delete"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-trash"})})})]}),b&&Object(c.jsxs)("div",{className:$e("popover"),children:[Object(c.jsx)("div",{className:$e("overlay"),onClick:v}),Object(c.jsx)(qe.a,{color:a,onChangeComplete:p})]})]})})),Ze=function(e){var t=Ye(e),n=Object(O.a)(t,2),a=n[0],i=n[1],s=Object(u.d)(ce),l=Object.keys(s).map((function(e){return parseInt(e,10)})),o=Object(r.useRef)(),j=Object(u.c)(),d=Object(r.useCallback)((function(t){i(t),e.onChange(t)}),[i,e.onChange]),b=Object(r.useCallback)((function(e){j(function(e){return{type:We,id:e}}(e))}),[j]),h=Object(r.useCallback)((function(){var e;j((e=Oe.getNextId(),{type:Fe,id:e,color:Ve}))}),[j]);return Object(r.useEffect)((function(){var e;null===(e=o.current)||void 0===e||e.scrollIntoView()}),[]),Object(c.jsx)("div",{className:$e(),children:Object(c.jsxs)("div",{className:$e("input"),children:[!e.required&&Object(c.jsx)(Qe,{id:null,onSelect:d,selected:null===a}),l.map((function(e){return Object(c.jsx)(Qe,{id:e,color:s[e],canEdit:!0,onDelete:0===e?void 0:b,onSelect:d,selected:a===e,ref:a===e?o:void 0},e)})),Object(c.jsxs)("div",{onClick:h,className:$e("item",["new"]),children:[Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-plus"})}),"Add color"]})]})})},et=n(140);var tt,nt=function(e){var t=e.control,n=e.label,a=e.onChange,i=e.validators,s=Object(Je.a)(e,["control","label","onChange","validators"]),l=Object(r.useState)(),o=Object(O.a)(l,2),j=o[0],u=o[1],d=Object(r.useCallback)((function(e){var t,n=Object(et.a)(null!==i&&void 0!==i?i:[]);try{for(n.s();!(t=n.n()).done;){var c=(0,t.value)(e);if(c)return void u(c)}}catch(c){n.e(c)}finally{n.f()}u(void 0),a(e)}),[a,i]);return Object(c.jsxs)("div",{className:"field",children:[Object(c.jsx)("label",{className:"label",children:n}),Object(c.jsx)(t,Object(J.a)({onChange:d,error:j},s))]})},ct=(tt={},Object(F.a)(tt,W.INTEGER,Ge),Object(F.a)(tt,W.FLOAT,De),Object(F.a)(tt,W.POINT,He),Object(F.a)(tt,W.COLOR,Ze),tt);function rt(e){var t=ct[e.property.type],n=Object(r.useCallback)((function(t){e.onChange(e.propName,t)}),[e.onChange,e.propName]);return Object(c.jsx)(nt,{control:t,label:e.property.label,value:e.value,onChange:n,required:e.property.required,validators:e.property.validators})}var at=function(e){var t=Object.keys(e.definitions);return Object(c.jsx)("div",{children:t.map((function(t){return Object(c.jsx)(rt,{property:e.definitions[t],propName:t,value:e.valueAccessor(t),onChange:e.onChange},t)}))})},it=Object(p.a)("svg-properties"),st=function(){var e,t=Object(u.d)(ge),n=Object(u.d)((e=null!==t&&void 0!==t?t:0,function(t){return t.editor.elements[e]})),a=Object(u.c)(),i=Object(r.useCallback)((function(e,n){a(function(e,t,n){return{type:R,elemIdx:e,propName:t,value:n}}(t,e,n))}),[t,a]),s=Object(r.useCallback)((function(e){return n[e]}),[n]);return Object(c.jsx)("div",{className:it(),children:Object(c.jsxs)(Me,{children:[Object(c.jsx)("h2",{className:"title "+it("title"),children:"Properties"}),null===t?Object(c.jsx)("p",{className:it("text",["unselected"]),children:"No shape selected"}):Object(c.jsx)(at,{definitions:te[n.type],valueAccessor:s,onChange:i})]})})},lt=function(e){var t,n,r=null!==(t=e.padding)&&void 0!==t?t:0,a=null!==(n=e.blk)&&void 0!==n?n:function(){return""};return Object(c.jsxs)("svg",Object(J.a)(Object(J.a)({preserveAspectRatio:"xMidYMid meet",ref:e.svgRef,width:e.width,height:e.height,viewBox:"".concat(0-r," ").concat(0-r," ").concat(100+2*r," ").concat(100+2*r),className:a("svg")},e.eventHandlers),{},{children:[e.children,e.overlay&&Object(c.jsx)("g",{className:"no-pointer-events",children:e.overlay})]}))},ot=function(e){var t=100/e.gridSize+1,n=e.gridSize,r=Array(t).fill(0);return Object(c.jsxs)(c.Fragment,{children:[r.map((function(e,t){return Object(c.jsx)("line",{x1:0,y1:t*n,x2:100,y2:t*n,stroke:"#999",strokeOpacity:.5,strokeWidth:1,vectorEffect:"non-scaling-stroke"},t)})),r.map((function(e,t){return Object(c.jsx)("line",{y1:0,x1:t*n,y2:100,x2:t*n,stroke:"#999",strokeOpacity:.5,strokeWidth:1,vectorEffect:"non-scaling-stroke"},t)}))]})},jt=function(e){return e.tiles},ut=Object(p.a)("svg-editor");function dt(e){return e.x>=0&&e.y>=0&&e.x<=100&&e.y<=100}var bt=function(){var e=function(){var e=Object(r.useState)(null),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),i=Object(O.a)(a,2),s=i[0],l=i[1];return[Object(r.useCallback)((function(e){null!==e&&(c(e),l(e.createSVGPoint()))}),[c]),Object(r.useCallback)((function(e,t){var c;if(null===s)return{x:0,y:0};s.x=e.clientX,s.y=e.clientY;var r=s.matrixTransform(null===(c=n.getScreenCTM())||void 0===c?void 0:c.inverse());return{x:Math.round(r.x/t)*t,y:Math.round(r.y/t)*t}}),[s,n])]}(),t=Object(O.a)(e,2),n=t[0],a=t[1],i=Object(u.d)(ye),s=Object(u.d)(Ce),l=Object(u.d)(ge),j=Object(u.d)(ke),d=Object(r.useState)(null),b=Object(O.a)(d,2),h=b[0],f=b[1],x=function(e){var t=Object(u.c)(),n=Object(r.useState)(Ne[e]),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(a.getInitialState()),l=Object(O.a)(s,2),o=l[0],j=l[1];Object(r.useEffect)((function(){i(Ne[e]),j(Ne[e].getInitialState())}),[e]);var d=Object(r.useCallback)((function(e){j(a.onClick(o,t,e))}),[o,t,j,a]),b=Object(r.useCallback)((function(e){j(a.onMouseMove(o,t,e))}),[o,t,j,a]),h=Object(r.useCallback)((function(e){j(a.onMouseLeave(o,t,e))}),[o,t,j,a]),f=Object(r.useCallback)((function(e,n){j(a.onShapeClick(o,t,e,n))}),[o,t,j,a]);return{svgEventHandlers:{onClick:d,onMouseMove:b,onMouseLeave:h,onFinish:Object(r.useCallback)((function(){j(a.onFinish(o,t))}),[o,t,j,a])},onShapeClick:f,renderedShape:a.renderShape(o),showHoverPoint:a.showHoverPoint(),toolType:a.toolType()}}(s),v=Object(u.c)(),p=Object(o.g)(),m=p.id?parseInt(p.id):null,N=Object(u.d)(function(e){return function(t){return t.tiles.find((function(t){return t.id===e}))}}(m)),y=Object(r.useCallback)((function(e){var t=a(e,i);dt(t)&&x.svgEventHandlers.onClick(t)}),[a,i,x.svgEventHandlers.onClick]),k=Object(r.useCallback)((function(e){var t=a(e,i);dt(t)&&f(t)}),[i,a]),C=Object(r.useCallback)((function(e){f(null);var t=a(e,i);dt(t)&&x.svgEventHandlers.onMouseLeave(t)}),[f,a,i,x.svgEventHandlers.onMouseLeave]),g=Object(r.useCallback)((function(e,t){x.toolType===H.MANIPULATOR&&(e.stopPropagation(),x.onShapeClick(t,j[t]))}),[x.onShapeClick,j]),E=Object(r.useCallback)((function(e){e.preventDefault(),x.svgEventHandlers.onFinish()}),[x.svgEventHandlers.onFinish]);return Object(r.useEffect)((function(){h&&x.svgEventHandlers.onMouseMove(h)}),[h]),Object(r.useEffect)((function(){v({type:M}),null!==m&&N&&v(D(N.elements))}),[m,N,v]),Object(c.jsx)(lt,{svgRef:n,blk:ut,padding:i/2,eventHandlers:{onClick:y,onMouseMove:k,onMouseLeave:C,onContextMenu:E},overlay:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(ot,{gridSize:i}),h&&x.showHoverPoint&&Object(c.jsx)("circle",{cx:h.x,cy:h.y,r:1,stroke:"black",strokeWidth:2,vectorEffect:"non-scaling-stroke"})]}),children:Object(c.jsxs)(lt,{width:100,height:100,children:[j.map((function(e,t){return Object(c.jsx)(oe,{selected:t===l,shape:e,eventHandlers:{onClick:function(e){return g(e,t)}}},e.id)})),x.renderedShape]})})},Ot=n(32),ht=Object(p.a)("svg-element-viewer"),ft=function(e){var t="Unknown";switch(e.type){case U.TYPE_POLYGON:t="Polygon";break;case U.TYPE_CIRCLE:t="Circle";break;case U.TYPE_POLYLINE:t="Polyline";break;case U.TYPE_LINE:t="Line"}return"".concat(t," #").concat(e.id)},xt=function(){var e=Object(u.d)(ke),t=Object(u.d)(ge),n=Object(u.c)(),a=Object(r.useCallback)((function(t,c){t.stopPropagation(),n(A(e.length-c-1))}),[n,e]),i=Object(r.useCallback)((function(t){t.destination&&n(D(h(e,e.length-t.source.index-1,e.length-t.destination.index-1)))}),[e,n]),s=Object(r.useCallback)((function(e,t){e.stopPropagation(),n(function(e){return{type:_,id:e}}(t))}),[n]),l=Object(r.useCallback)((function(){n(A(null))}),[n]),o=Object(xe.a)(e);return o.reverse(),Object(c.jsx)(Ot.a,{onDragEnd:i,children:Object(c.jsx)("div",{className:ht(),onClick:l,children:Object(c.jsx)(Me,{children:Object(c.jsxs)("div",{className:ht("content"),children:[Object(c.jsx)("h2",{className:"title",children:"Elements"}),Object(c.jsx)(Ot.c,{droppableId:"elements",children:function(n,r){return Object(c.jsxs)("div",Object(J.a)(Object(J.a)({},n.droppableProps),{},{ref:n.innerRef,className:ht("items"),children:[o.map((function(n,r){return Object(c.jsx)(Ot.b,{draggableId:n.id.toString(),index:r,children:function(i){return Object(c.jsxs)("div",Object(J.a)(Object(J.a)(Object(J.a)({onClick:function(e){return a(e,r)},className:ht("item",t===e.length-r-1?["active"]:[])},i.draggableProps),i.dragHandleProps),{},{ref:i.innerRef,children:[Object(c.jsxs)("div",{className:ht("info"),children:[Object(c.jsx)("div",{className:ht("thumb"),children:Object(c.jsx)(lt,{blk:ht,children:Object(c.jsx)(oe,{shape:n})})}),Object(c.jsx)("div",{className:ht("label"),children:ft(n)})]}),Object(c.jsx)("div",{className:ht("actions"),children:Object(c.jsx)("button",{onClick:function(e){return s(e,n.id)},className:ht("action",["delete"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-trash"})})})})]}),n.id)}},n.id)})),n.placeholder]}))}})]})})})})},vt=Object(p.a)("svg-editor"),pt=function(){return Object(c.jsx)("div",{className:vt(),children:Object(c.jsx)(I,{horizontal:!0,left:Object(c.jsx)(xt,{}),right:Object(c.jsx)(st,{}),children:Object(c.jsx)(I,{left:Object(c.jsx)(we,{}),children:Object(c.jsx)("div",{className:vt("wrap"),children:Object(c.jsx)("div",{className:vt("content"),children:Object(c.jsx)(g,{children:Object(c.jsx)(bt,{})})})})})})})},mt=function(){return Object(c.jsx)(j,{header:Object(c.jsx)(x,{}),footer:Object(c.jsx)(v,{}),children:Object(c.jsx)(pt,{})})},Nt=n(141),yt=n.n(Nt),kt="GENERATOR_SET_ROWS",Ct="GENERATOR_SET_COLS",gt="GENERATOR_SET_SELECTOR",Et="GENERATOR_SET_SELECTOR_PROPERTY",It="GENERATOR_SET_BACKGROUND";var Tt=function(e){return e.generator.rows},Lt=function(e){return e.generator.cols},St=function(e){return e.generator.tileSelector},Pt=function(e){return e.generator.tileSelectorProperties},Rt=function(e){return e.generator.backgroundColorId};function wt(e){var t=Ae(e,Object(r.useCallback)((function(e){return!0}),[]),Object(r.useCallback)((function(e){return{success:!0,formatted:e}}),[])),n=Object(O.a)(t,3),a=n[0],i=n[1],s=n[2],l=Object(r.useCallback)((function(e){var t=e.target.value;s(t)}),[s]);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("div",{className:"select",children:Object(c.jsx)("select",{className:"input",onChange:l,value:a,children:e.choices&&e.choices.map((function(e){return Object(c.jsx)("option",{value:e.key,children:e.label},e.key)}))})})}),i&&Object(c.jsx)("p",{className:"help is-danger",children:i})]})}var _t,Mt,Yt,At,Gt,Dt,Ht,Ft,Wt,zt,qt=n(49),Jt=n(50);n(263);function Bt(e){return e.selectTile=e.selectTile.bind(e),e}function Ut(e,t,n,c){return function(r,a){"__propertyDefinitions"in r||Object.defineProperty(r,"__propertyDefinitions",{value:{}}),r.__propertyDefinitions[a]={type:e,label:t,required:n,validators:c}}}function Vt(e){var t;return null!==(t=e.__propertyDefinitions)&&void 0!==t?t:{}}var Xt=Bt({label:"Linear selector",description:"step * index + offset",defaultProperties:new(_t=Ut(W.INTEGER,"Step",!0,[V(0)]),Mt=Ut(W.INTEGER,"Offset",!0,[V(0)]),Yt=function e(t,n){Object(m.a)(this,e),Object(qt.a)(this,"step",At,this),Object(qt.a)(this,"offset",Gt,this),this.step=t,this.offset=n},At=Object(Jt.a)(Yt.prototype,"step",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gt=Object(Jt.a)(Yt.prototype,"offset",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yt)(1,0),selectTile:function(e,t,n,c){return c.step*e+c.offset}}),$t={tileSelectors:{LinearSelector:Xt,GeometricSelector:Bt({label:"Geometric selector",description:"lastValue * q",defaultProperties:new(Dt=Ut(W.FLOAT,"q",!0,[V(0)]),Ht=Ut(W.INTEGER,"Initial",!0,[V(0)]),Ft=function e(t,n){Object(m.a)(this,e),Object(qt.a)(this,"q",Wt,this),Object(qt.a)(this,"initial",zt,this),this.q=t,this.initial=n},Wt=Object(Jt.a)(Ft.prototype,"q",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zt=Object(Jt.a)(Ft.prototype,"initial",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ft)(1.5,1),state:{last:0},selectTile:function(e,t,n,c){var r,a;return 0===e&&(this.state={last:c.initial}),this.state.last=(null!==(r=null===(a=this.state)||void 0===a?void 0:a.last)&&void 0!==r?r:1)*c.q,this.state.last}}),FibonacciSelector:Bt({label:"Fibonacci selector",description:"Selector using Fibonacci series",defaultProperties:new function e(){Object(m.a)(this,e)},state:{n1:1,n2:1},selectTile:function(e,t,n,c){var r;if(0===e)return this.state={n1:1,n2:1},1;if(1===e)return 1;var a=null===(r=this.state)||void 0===r?void 0:r.n1;return this.state.n1=this.state.n2,this.state.n2=this.state.n2+a,this.state.n2}})}};function Kt(e){return $t.tileSelectors[e]}var Qt=$t,Zt=function(e){var t=e.tile;return Object(c.jsx)("svg",{viewBox:"0 0 100 100",width:100,height:100,xmlns:"http://www.w3.org/2000/svg",children:t.elements.map((function(e){return Object(c.jsx)(oe,{shape:e},e.id)}))})},en=function(e){var t=e.tiles.length,n=Object(r.useMemo)((function(){return Array(e.rows).fill(0)}),[e.rows]),a=Object(r.useMemo)((function(){return Array(e.cols).fill(0)}),[e.cols]),i=Kt(e.tileSelector),s=Object(r.useMemo)((function(){return n.map((function(n,c){return a.map((function(n,r){var a=c*e.cols+r,s=i.selectTile(a,c,r,e.tileSelectorProperties),l=e.tiles[Math.round(s)%t];return null===l||void 0===l?void 0:l.id}))}))}),[n,a,i,t,e.cols,e.tiles,e.tileSelectorProperties]),l=Object(r.useMemo)((function(){return e.tiles.map((function(e){return Object(c.jsx)("g",{id:"tile-".concat(e.id),children:Object(c.jsx)(Zt,{tile:e},e.id)},e.id)}))}),[e.tiles]);return Object(c.jsxs)("svg",{shapeRendering:"crispEdges",version:"1.1",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 ".concat(100*e.cols," ").concat(100*e.rows),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[Object(c.jsx)("defs",{children:l}),e.backgroundColor&&Object(c.jsx)("rect",{x:0,y:0,width:100*e.cols,height:100*e.rows,fill:e.backgroundColor}),s.map((function(t,n){return t.map((function(t,r){return Object(c.jsx)("use",{xlinkHref:"#tile-".concat(t),x:100*r,y:100*n},n*e.cols+r)}))}))]})},tn=function(){var e=Object(u.d)(jt),t=Object(u.d)(Lt),n=Object(u.d)(Tt),r=Object(u.d)(St),a=Object(u.d)(Pt),i=Object(u.d)(Rt),s=Object(u.d)(ne(i));return Object(c.jsx)(c.Fragment,{children:e.length>0&&Object(c.jsx)(en,{rows:n,cols:t,tiles:e,tileSelector:r,tileSelectorProperties:a,backgroundColor:s})})},nn=n(23),cn=n(142),rn={elements:[],gridSize:5,selectedTool:de.SELECT,selectedIdx:null};var an=[{id:1,elements:[{type:U.TYPE_POLYLINE,zIndex:0,strokeColorId:0,strokeWidth:2,points:[{x:30,y:40},{x:60,y:75},{x:90,y:70},{x:70,y:0},{x:35,y:85}],id:1}]},{id:2,elements:[{type:U.TYPE_LINE,zIndex:0,strokeColorId:0,strokeWidth:2,point1:{x:20,y:35},point2:{x:80,y:85},id:2},{type:U.TYPE_LINE,zIndex:0,strokeColorId:0,strokeWidth:2,point1:{x:30,y:80},point2:{x:55,y:30},id:3}]},{id:3,elements:[{type:U.TYPE_POLYGON,zIndex:0,fillColorId:0,points:[{x:75,y:25},{x:25,y:60},{x:25,y:60},{x:75,y:85},{x:75,y:85},{x:15,y:10},{x:15,y:10}],strokeColorId:null,strokeWidth:null,id:4}]}];function sn(e,t){var n=e.x-50,c=e.y-50;return{x:(t?c:-c)+50,y:(t?-n:n)+50}}var ln,on={rows:17,cols:17,tileSelector:(ln={LinearSelector:Xt},Object.keys(ln)[0]),tileSelectorProperties:Xt.defaultProperties,backgroundColorId:null};var jn=Object(nn.combineReducers)({editor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:var n=e.elements.length,c=[].concat(Object(xe.a)(e.elements),[t.shape]);return Object(J.a)(Object(J.a)({},e),{},{elements:c,selectedIdx:n});case L:return Object(J.a)(Object(J.a)({},e),{},{gridSize:t.size});case S:return Object(J.a)(Object(J.a)({},e),{},{selectedIdx:t.idx});case P:return Object(J.a)(Object(J.a)({},e),{},{selectedTool:t.tool});case R:return Object(J.a)(Object(J.a)({},e),{},{elements:e.elements.map((function(e,n){return n===t.elemIdx?Object(J.a)(Object(J.a)({},e),{},Object(F.a)({},t.propName,t.value)):e}))});case w:var r=null!==e.selectedIdx?t.elements.findIndex((function(t){var n;return t.id===e.elements[null!==(n=e.selectedIdx)&&void 0!==n?n:0].id})):null;return Object(J.a)(Object(J.a)({},e),{},{elements:t.elements,selectedIdx:r});case _:var a=e.selectedIdx,i=e.elements.filter((function(n,c){var r=n.id===t.id;return r&&e.selectedIdx===c&&(a=null),!r}));return Object(J.a)(Object(J.a)({},e),{},{elements:i,selectedIdx:a});case M:return rn;default:return e}},palette:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe:return Object(J.a)(Object(J.a)({},e),{},Object(F.a)({},t.id,t.color));case We:var n=t.id,c=(e[n],Object(Je.a)(e,[n].map(Be.a)));return c;case ze:return Object(J.a)(Object(J.a)({},e),{},Object(F.a)({},t.id,t.color));case Ue:return JSON.parse(JSON.stringify(t.data.palette));default:return e}},tiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:var n=e.findIndex((function(e){return e.id===t.tile.id}));return n>=0?e.map((function(e){return e.id===t.tile.id?Object(J.a)({},t.tile):e})):[].concat(Object(xe.a)(e),[t.tile]);case Ie:return e.filter((function(e){return e.id!==t.id}));case Te:return Object(xe.a)(t.tiles);case Ue:return JSON.parse(JSON.stringify(t.data.tiles));case Le:var c=e[t.idx],r=JSON.parse(JSON.stringify(c));r.id=t.newId;var a=Object(xe.a)(e);return a.splice(t.idx+1,0,r),a;case Se:var i=e[t.idx].elements.map((function(e){switch(e.type){case U.TYPE_CIRCLE:var n=e;return Object(J.a)(Object(J.a)({},n),{},{center:sn(n.center,t.ccw)});case U.TYPE_LINE:var c=e;return Object(J.a)(Object(J.a)({},c),{},{point1:sn(c.point1,t.ccw),point2:sn(c.point2,t.ccw)});case U.TYPE_POLYGON:var r=e;return Object(J.a)(Object(J.a)({},r),{},{points:r.points.map((function(e){return sn(e,t.ccw)}))});case U.TYPE_POLYLINE:var a=e;return Object(J.a)(Object(J.a)({},a),{},{points:a.points.map((function(e){return sn(e,t.ccw)}))});default:return e}})),s=Object(xe.a)(e);return s[t.idx]=Object(J.a)(Object(J.a)({},e[t.idx]),{},{elements:i}),s;default:return e}},generator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case kt:return Object(J.a)(Object(J.a)({},e),{},{rows:t.rows});case Ct:return Object(J.a)(Object(J.a)({},e),{},{cols:t.cols});case gt:return Object(J.a)(Object(J.a)({},e),{},{tileSelector:t.selector,tileSelectorProperties:Kt(t.selector).defaultProperties});case Et:return Object(J.a)(Object(J.a)({},e),{},{tileSelectorProperties:Object(J.a)(Object(J.a)({},e.tileSelectorProperties),{},Object(F.a)({},t.prop,t.value))});case Ue:return JSON.parse(JSON.stringify(t.data.generator));case It:return Object(J.a)(Object(J.a)({},e),{},{backgroundColorId:t.backgroundColorId});default:return e}}}),un=Object(nn.createStore)(jn,Object(cn.composeWithDevTools)()),dn=Object(p.a)("gen-settings"),bn=function(){var e=Object(u.d)(Tt),t=Object(u.d)(Lt),n=Object(u.d)(St),a=Kt(n),i=Object(u.d)(Pt),s=Object(u.c)(),l=Object(r.useCallback)((function(e){s(function(e){return{type:kt,rows:e}}(null!==e&&void 0!==e?e:0))}),[s]),o=Object(r.useCallback)((function(e){s(function(e){return{type:Ct,cols:e}}(null!==e&&void 0!==e?e:0))}),[s]),j=Object(r.useCallback)((function(e){s({type:gt,selector:e})}),[s]),d=Object(r.useMemo)((function(){return Object.keys(Qt.tileSelectors).map((function(e){return{key:e,label:Kt(e).label}}))}),[Qt.tileSelectors]),b=Object(r.useCallback)((function(e){return i[e]}),[i]),O=Object(r.useCallback)((function(e,t){s(function(e,t){return{type:Et,prop:e,value:t}}(e,t))}),[s]),h=Object(r.useCallback)((function(){f("mosaic.svg",yt.a.renderToStaticMarkup(Object(c.jsx)(u.a,{store:un,children:Object(c.jsx)(tn,{})})))}),[]);return Object(c.jsx)("div",{className:dn(),children:Object(c.jsx)(Me,{children:Object(c.jsxs)("div",{className:dn("content"),children:[Object(c.jsx)("h1",{className:"title",children:"Settings"}),Object(c.jsx)("button",{onClick:h,className:"button is-fullwidth is-link mb-3",children:"Export mosaic"}),Object(c.jsx)(nt,{control:Ge,label:"Rows",onChange:l,validators:[V(1)],required:!0,value:e}),Object(c.jsx)(nt,{control:Ge,label:"Columns",onChange:o,validators:[V(1)],required:!0,value:t}),Object(c.jsxs)("div",{className:"field-container",children:[Object(c.jsx)(nt,{label:"Tile selector",control:wt,onChange:j,value:n,choices:d,required:!0}),Object(c.jsx)("p",{className:"help",children:a.description}),Object(c.jsx)(at,{definitions:Vt(a.defaultProperties),valueAccessor:b,onChange:O})]})]})})})},On=Object(p.a)("reorder"),hn=function(){var e=Object(u.d)(jt),t=Object(u.c)(),n=Object(r.useCallback)((function(n){n.destination&&t(function(e){return{type:Te,tiles:e}}(h(e,n.source.index,n.destination.index)))}),[e,t]);return Object(c.jsx)(Ot.a,{onDragEnd:n,children:Object(c.jsxs)("div",{className:On("columns"),children:[Object(c.jsx)("div",{className:On("col",["idx"]),children:e.map((function(e,t){return Object(c.jsx)("div",{className:On("item",["idx"]),children:t},t)}))}),Object(c.jsx)(Ot.c,{droppableId:"tiles",children:function(t,n){return Object(c.jsxs)("div",Object(J.a)(Object(J.a)({},t.droppableProps),{},{ref:t.innerRef,className:On("col",["items"]),children:[e.map((function(e,t){return Object(c.jsx)(Ot.b,{draggableId:e.id.toString(),index:t,children:function(t){return Object(c.jsxs)("div",Object(J.a)(Object(J.a)(Object(J.a)({},t.dragHandleProps),t.draggableProps),{},{ref:t.innerRef,className:On("item",["tile"]),children:[Object(c.jsx)("div",{className:On("thumb"),children:Object(c.jsx)(lt,{blk:On,children:e.elements.map((function(e){return Object(c.jsx)(oe,{shape:e},e.id)}))})}),Object(c.jsxs)("div",{className:On("label"),children:["ID: ",e.id]})]}))}},e.id)})),t.placeholder]}))}})]})})},fn=Object(p.a)("tiles-sidebar"),xn=function(){var e=Object(u.d)(Rt),t=Object(u.c)(),n=Object(r.useCallback)((function(e){t(function(e){return{type:It,backgroundColorId:e}}(e))}),[t]);return Object(c.jsx)("div",{className:fn(),children:Object(c.jsx)(Me,{children:Object(c.jsxs)("div",{className:fn("content"),children:[Object(c.jsx)("h1",{className:"title",children:"Tiles"}),Object(c.jsx)(nt,{label:"Background color",control:Ze,onChange:n,value:e}),Object(c.jsx)("h2",{className:"title is-4 mt-5",children:"Tile set"}),Object(c.jsx)("p",{className:"subtitle is-6",children:"Reorder by drag&drop"}),Object(c.jsx)(hn,{})]})})})},vn=Object(p.a)("generator"),pn=function(){return Object(c.jsx)(j,{header:Object(c.jsx)(x,{}),footer:Object(c.jsx)(v,{}),children:Object(c.jsx)(I,{horizontal:!0,left:Object(c.jsx)(bn,{}),right:Object(c.jsx)(xn,{}),children:Object(c.jsx)("div",{className:vn(),children:Object(c.jsx)("div",{className:vn("wrap"),children:Object(c.jsx)(g,{children:Object(c.jsx)(tn,{})})})})})})},mn=Object(p.a)("tile-item"),Nn=function(e){var t=e.onClick;return Object(c.jsx)("div",{onClick:t,className:mn(["new"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-plus fa-2x"})})})},yn=function(e){var t=Object(u.c)(),n=Object(o.f)(),a=Object(r.useCallback)((function(){n.push("/tiles/".concat(e.tile.id))}),[e.tile,n]),i=Object(r.useCallback)((function(){var n;t((n=e.tile.id,{type:Ie,id:n}))}),[e.tile,t]),s=Object(r.useCallback)((function(){var n,c;t((n=e.idx,c=he.getNextId(),{type:Le,idx:n,newId:c}))}),[e.idx]),l=Object(r.useCallback)((function(){t(Pe(e.idx,!0))}),[e.idx,t]),j=Object(r.useCallback)((function(){t(Pe(e.idx,!1))}),[e.idx,t]);return Object(c.jsxs)("div",{className:mn(),children:[Object(c.jsxs)("div",{className:mn("thumb"),children:[Object(c.jsx)(lt,{blk:mn,children:e.tile.elements.map((function(e){return Object(c.jsx)(oe,{shape:e},e.id)}))}),Object(c.jsxs)("div",{className:mn("actions"),children:[Object(c.jsx)("button",{onClick:s,className:mn("action"),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-clone"})})}),Object(c.jsx)("button",{onClick:l,className:mn("action"),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-undo"})})}),Object(c.jsx)("button",{onClick:j,className:mn("action"),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-redo"})})}),Object(c.jsx)("button",{onClick:i,className:mn("action",["delete"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-trash"})})}),Object(c.jsx)("button",{onClick:a,className:mn("action"),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-pen"})})})]})]}),Object(c.jsx)("div",{className:mn("label"),children:Object(c.jsxs)("span",{className:"has-text-grey",children:["idx: ",e.idx]})})]})},kn=Object(p.a)("tiles"),Cn=function(){var e=Object(u.d)(jt),t=Object(o.f)(),n=Object(r.useCallback)((function(){t.push("/tiles/new")}),[t]);return Object(c.jsx)(j,{header:Object(c.jsx)(x,{}),footer:Object(c.jsx)(v,{}),children:Object(c.jsx)(Me,{children:Object(c.jsxs)("div",{className:kn(),children:[Object(c.jsxs)("div",{className:kn("heading"),children:[Object(c.jsx)("h1",{className:"title",children:"Tiles"}),Object(c.jsx)("p",{className:kn("actions"),children:Object(c.jsx)(l.b,{to:"/tiles/reorder",children:"Reorder"})})]}),Object(c.jsx)(g,{children:Object(c.jsxs)("div",{className:kn("items"),children:[e.map((function(e,t){return Object(c.jsx)(yn,{idx:t,tile:e},e.id)})),Object(c.jsx)(Nn,{onClick:n})]})})]})})})},gn=Object(p.a)("reorder"),En=function(){return Object(c.jsx)(j,{header:Object(c.jsx)(x,{}),footer:Object(c.jsx)(v,{}),children:Object(c.jsx)(Me,{children:Object(c.jsxs)("div",{className:gn(),children:[Object(c.jsxs)("div",{className:gn("heading"),children:[Object(c.jsx)("h1",{className:"title",children:"Reorder tiles"}),Object(c.jsx)("p",{className:gn("actions"),children:Object(c.jsx)(l.b,{to:"/tiles",children:"Back"})})]}),Object(c.jsx)("p",{className:"subtitle",children:"Reorder tiles by drag & drop"}),Object(c.jsx)(g,{children:Object(c.jsx)(hn,{})})]})})})};function In(e,t){e(function(e){return{type:Ue,data:e}}(t));var n=Object.keys(t.palette).reduce((function(e,t){return Math.max(e,parseInt(t,10))}),0);Oe.setLastId(n);var c=t.tiles.reduce((function(e,t){return Math.max(e,t.id)}),0);he.setLastId(c);var r=t.tiles.reduce((function(e,t){return Math.max(e,t.elements.reduce((function(e,t){return Math.max(e,t.id)}),0))}),0);be.setLastId(r)}var Tn=Object(p.a)("import"),Ln=function(){var e=Object(r.useState)(),t=Object(O.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(),s=Object(O.a)(i,2),l=s[0],d=s[1],b=Object(o.f)(),h=Object(u.c)(),f=Object(r.useCallback)((function(e){d(void 0),a(e.target.files[0])}),[a]),p=Object(r.useCallback)((function(){if(n){var e=new FileReader;e.onload=function(e){var t;if(null===(t=e.target)||void 0===t?void 0:t.result)try{var n=JSON.parse(e.target.result);In(h,n),b.push("/")}catch(c){d(c.message)}else d("Error reading file.")},e.readAsText(n)}else d("First choose a project file.")}),[n,h,b]);return Object(c.jsx)(j,{header:Object(c.jsx)(x,{}),footer:Object(c.jsx)(v,{}),children:Object(c.jsx)("div",{className:Tn(),children:Object(c.jsx)("div",{className:"card",children:Object(c.jsx)("div",{className:"card-content",children:Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)("h1",{className:"mb-5",children:"Import project"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"field mb-5",children:[Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("div",{className:"file",children:Object(c.jsxs)("label",{className:"file-label",children:[Object(c.jsx)("input",{className:"file-input",type:"file",name:"projectFile",onChange:f}),Object(c.jsxs)("span",{className:"file-cta",children:[Object(c.jsx)("span",{className:"file-icon",children:Object(c.jsx)("i",{className:"fas fa-upload"})}),Object(c.jsx)("span",{className:"file-label",children:"Choose a file\u2026"})]})]})})}),Object(c.jsx)("p",{className:"help",children:"Choose a JSON file exported from this application."}),l&&Object(c.jsx)("p",{className:"help is-danger",children:l})]}),Object(c.jsx)("div",{className:"field",children:Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("button",{className:"button is-link",onClick:p,children:"Import"})})})]})})})})})},Sn=n(143),Pn=n.n(Sn),Rn=function(){var e=Object(r.useState)(""),t=Object(O.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){fetch("https://raw.githubusercontent.com/EnkeyMC/TileMosaicGenerator/main/README.md").then((function(e){if(e.ok)return e.text();throw new Error("Request returned with status "+e.status+": "+e.statusText)})).then((function(e){return a(e)})).catch((function(e){return a("# Error loading readme\n\nReason: ".concat(e))}))}),[]),Object(c.jsx)(j,{header:Object(c.jsx)(x,{}),footer:Object(c.jsx)(v,{}),children:Object(c.jsx)(Me,{children:Object(c.jsx)("div",{className:"container pt-6 pb-6",children:Object(c.jsx)(g,{children:Object(c.jsx)(Pn.a,{className:"content",children:n})})})})})};var wn=function(){return Object(c.jsx)(l.a,{children:Object(c.jsxs)(o.c,{children:[Object(c.jsx)(o.a,{path:"/tiles/new",children:Object(c.jsx)(g,{children:Object(c.jsx)(mt,{})})}),Object(c.jsx)(o.a,{path:"/tiles/reorder",children:Object(c.jsx)(g,{children:Object(c.jsx)(En,{})})}),Object(c.jsx)(o.a,{path:"/tiles/:id",children:Object(c.jsx)(g,{children:Object(c.jsx)(mt,{})})}),Object(c.jsx)(o.a,{path:"/tiles",children:Object(c.jsx)(g,{children:Object(c.jsx)(Cn,{})})}),Object(c.jsx)(o.a,{path:"/import",children:Object(c.jsx)(g,{children:Object(c.jsx)(Ln,{})})}),Object(c.jsx)(o.a,{path:"/help",children:Object(c.jsx)(g,{children:Object(c.jsx)(Rn,{})})}),Object(c.jsx)(o.a,{path:"/",children:Object(c.jsx)(g,{children:Object(c.jsx)(pn,{})})})]})})},_n=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,346)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};n(337),n(341),n(342),n(343);s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(u.a,{store:un,children:Object(c.jsx)(wn,{})})}),document.getElementById("root"));var Mn=localStorage.getItem("state");In(un.dispatch,Mn?JSON.parse(Mn):JSON.parse('{"version":{"MAJOR":0,"MINOR":1},"tiles":[{"id":10,"elements":[{"type":"POLYGON","zIndex":0,"fillColorId":0,"points":[{"x":0,"y":0},{"x":100,"y":100},{"x":100,"y":100},{"x":0,"y":100},{"x":0,"y":100}],"strokeColorId":null,"strokeWidth":null,"id":9}]},{"id":12,"elements":[{"type":"POLYGON","zIndex":0,"fillColorId":0,"points":[{"x":100,"y":100},{"x":0,"y":0},{"x":0,"y":0},{"x":100,"y":0},{"x":100,"y":0}],"strokeColorId":null,"strokeWidth":null,"id":9}]},{"id":11,"elements":[{"type":"POLYGON","zIndex":0,"fillColorId":0,"points":[{"x":100,"y":0},{"x":0,"y":100},{"x":0,"y":100},{"x":0,"y":0},{"x":0,"y":0}],"strokeColorId":null,"strokeWidth":null,"id":9}]},{"id":13,"elements":[{"type":"POLYGON","zIndex":0,"fillColorId":0,"points":[{"x":0,"y":100},{"x":100,"y":0},{"x":100,"y":0},{"x":100,"y":100},{"x":100,"y":100}],"strokeColorId":null,"strokeWidth":null,"id":9}]},{"id":14,"elements":[]},{"id":15,"elements":[{"type":"POLYGON","zIndex":0,"fillColorId":0,"points":[{"x":0,"y":0},{"x":100,"y":0},{"x":100,"y":0},{"x":100,"y":100},{"x":100,"y":100},{"x":0,"y":100},{"x":0,"y":100}],"strokeColorId":null,"strokeWidth":null,"id":10}]}],"generator":{"rows":18,"cols":21,"tileSelector":"LinearSelector","tileSelectorProperties":{"step":1,"offset":0}},"palette":{"0":"#000"}}')),window.onbeforeunload=function(){var e=JSON.stringify(b(un.getState()));localStorage.setItem("state",e)},_n()}},[[344,1,2]]]);
//# sourceMappingURL=main.68a48733.chunk.js.map