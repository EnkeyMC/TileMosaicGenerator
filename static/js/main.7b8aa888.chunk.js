(this["webpackJsonptile-mosaic-generator"]=this["webpackJsonptile-mosaic-generator"]||[]).push([[0],{151:function(e,t,n){},344:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),i=n(40),s=n.n(i),l=(n(151),n(16)),o=n(11),j=function(e){return Object(c.jsxs)("div",{className:"fullscreen-layout",children:[Object(c.jsx)("div",{className:"fullscreen-layout__header",children:e.header}),Object(c.jsx)("div",{className:"fullscreen-layout__content",children:e.children}),Object(c.jsx)("div",{className:"fullscreen-layout__footer",children:e.footer})]})},u=n(6),d={MAJOR:0,MINOR:1},b=function(e){return{version:d,tiles:e.tiles,generator:e.generator,palette:e.palette}},O=n(7);function h(e,t,n){var c=Array.from(e),r=c.splice(t,1),a=Object(O.a)(r,1)[0];return c.splice(n,0,a),c}function f(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}var x=function(){var e=Object(u.d)(b),t=Object(r.useCallback)((function(t){t.preventDefault(),t.stopPropagation(),f("TMG-"+(new Date).toISOString()+".json",JSON.stringify(e))}),[e]);return Object(c.jsxs)("nav",{className:"navbar is-info",role:"navigation","aria-label":"main navigation",children:[Object(c.jsx)("div",{className:"navbar-brand",children:Object(c.jsxs)("h1",{className:"navbar-item is-flex-direction-column",children:[Object(c.jsx)("span",{className:"title is-4 mb-4 has-text-white",children:"Tile Mosaic"}),Object(c.jsx)("span",{className:"subtitle is-6 is-uppercase is-bold has-text-light",children:"Generator"})]})}),Object(c.jsxs)("div",{className:"navbar-menu",children:[Object(c.jsxs)("div",{className:"navbar-start",children:[Object(c.jsx)(l.b,{to:"/",exact:!0,className:"navbar-item",activeClassName:"is-active",children:"Generator"}),Object(c.jsx)(l.b,{to:"/tiles",className:"navbar-item",activeClassName:"is-active",children:"Tiles"})]}),Object(c.jsxs)("div",{className:"navbar-end",children:[Object(c.jsxs)("a",{href:"#",onClick:t,className:"navbar-item ml-3",children:[Object(c.jsx)("span",{className:"icon mr-1",children:Object(c.jsx)("i",{className:"fas fa-file-export"})}),"Export project"]}),Object(c.jsxs)(l.b,{to:"/import",className:"navbar-item",activeClassName:"is-active",children:[Object(c.jsx)("span",{className:"icon mr-1",children:Object(c.jsx)("i",{className:"fas fa-file-import"})}),"Import project"]}),Object(c.jsxs)(l.b,{to:"/help",className:"navbar-item",activeClassName:"is-active",children:[Object(c.jsx)("span",{className:"icon mr-1",children:Object(c.jsx)("i",{className:"fas fa-question-circle"})}),"Help"]})]})]})]})},p=function(){return Object(c.jsx)("footer",{className:"has-background-light p-3",children:Object(c.jsx)("div",{className:"content has-text-centered",children:Object(c.jsxs)("p",{className:"has-text-grey is-size-7",children:[Object(c.jsx)("i",{children:"Tile Mosaic Generator"})," is created by Martin Omacht as a project for VIN course at Brno University of Technology in 2021. (Version: ",d.MAJOR,".",d.MINOR,")"]})})})},v=n(8),m=Object(v.a)("panel-layout"),N=function(e){var t=e.horizontal;return Object(c.jsxs)("div",{className:m({horizontal:t,vertical:!t}),children:[Object(c.jsx)("div",{className:m("side"),children:e.left}),Object(c.jsx)("div",{className:m("content"),children:e.children}),Object(c.jsx)("div",{className:m("side"),children:e.right})]})},y="EDITOR_ADD_SHAPE",k="EDITOR_SET_GRID",C="EDITOR_SELECT_SHAPE",g="EDITOR_SELECT_TOOL",E="EDITOR_ELEM_PROP_CHANGE",I="EDITOR_SET_ELEMENTS",T="EDITOR_DELETE_ELEMENT",L="EDITOR_CLEAR";function S(e){return{type:y,shape:e}}function P(e){return{type:C,idx:e}}function R(e){return{type:g,tool:e}}function w(e){return{type:I,elements:e}}var _,M=n(9),Y=n(14),A=n(20),G=n(26),H=n(25);!function(e){e[e.CREATOR=0]="CREATOR",e[e.MANIPULATOR=1]="MANIPULATOR"}(_||(_={}));var D,F=function(){function e(){Object(Y.a)(this,e)}return Object(A.a)(e,[{key:"onClick",value:function(e,t,n){return e}},{key:"onMouseMove",value:function(e,t,n){return e}},{key:"onMouseLeave",value:function(e,t,n){return e}},{key:"onShapeClick",value:function(e,t,n,c){return e}},{key:"onFinish",value:function(e,t){return e}},{key:"renderShape",value:function(e){return null}},{key:"toolType",value:function(){return _.CREATOR}},{key:"showHoverPoint",value:function(){return!0}}]),e}(),W=function(e){Object(G.a)(n,e);var t=Object(H.a)(n);function n(){return Object(Y.a)(this,n),t.apply(this,arguments)}return Object(A.a)(n,[{key:"onClick",value:function(e,t,n){return t(P(null)),e}},{key:"onShapeClick",value:function(e,t,n,c){return t(P(n)),e}},{key:"showHoverPoint",value:function(){return!1}},{key:"toolType",value:function(){return _.MANIPULATOR}},{key:"getInitialState",value:function(){return{}}}]),n}(F),z=n(2);!function(e){e[e.INTEGER=0]="INTEGER",e[e.FLOAT=1]="FLOAT",e[e.POINT=2]="POINT",e[e.COLOR=3]="COLOR"}(D||(D={}));var q,J,U=function(e){return function(t){return t&&t<e?"Minimum is ".concat(e):void 0}};!function(e){e.TYPE_CIRCLE="CIRCLE",e.TYPE_LINE="LINE",e.TYPE_POLYGON="POLYGON",e.TYPE_POLYLINE="POLYLINE"}(J||(J={}));var B={strokeWidth:{label:"Stroke width",type:D.FLOAT,validators:[U(0)]},strokeColorId:{label:"Stroke color",type:D.COLOR}},V={fillColorId:{label:"Fill color",type:D.COLOR}},X=Object(z.a)(Object(z.a)({center:{label:"Center",type:D.POINT,required:!0},r:{label:"Radius",type:D.FLOAT,required:!0}},V),B),$=Object(z.a)({point1:{label:"Start point",type:D.POINT,required:!0},point2:{label:"End point",type:D.POINT,required:!0}},B),K=Object(z.a)(Object(z.a)({},B),V),Q=B,Z=(q={},Object(M.a)(q,J.TYPE_LINE,$),Object(M.a)(q,J.TYPE_POLYGON,K),Object(M.a)(q,J.TYPE_POLYLINE,Q),Object(M.a)(q,J.TYPE_CIRCLE,X),q),ee=function(e){return function(t){return null===e?void 0:t.palette[e]}},te=function(e){return e.palette},ne="#3298dc",ce=function(e){var t,n=e.line,r=e.selected,a=Object(u.d)(ee(n.strokeColorId)),i=r?ne:a;return Object(c.jsx)("line",Object(z.a)({x1:n.point1.x,y1:n.point1.y,x2:n.point2.x,y2:n.point2.y,stroke:null!==i&&void 0!==i?i:"none",strokeWidth:null!==(t=n.strokeWidth)&&void 0!==t?t:0},e.eventHandlers))},re=function(e){var t,n=e.polyline,r=e.selected,a=Object(u.d)(ee(n.strokeColorId)),i=r?ne:a;return Object(c.jsx)("polyline",Object(z.a)({points:n.points.map((function(e){return"".concat(e.x,",").concat(e.y)})).join(" "),stroke:null!==i&&void 0!==i?i:"none",strokeWidth:null!==(t=n.strokeWidth)&&void 0!==t?t:0,fill:"none"},e.eventHandlers))},ae=function(e){var t,n=e.circle,r=e.selected,a=Object(u.d)(ee(n.fillColorId)),i=r?ne:a,s=Object(u.d)(ee(n.strokeColorId));return Object(c.jsx)("circle",Object(z.a)({cx:n.center.x,cy:n.center.y,r:n.r,fill:null!==i&&void 0!==i?i:"none",stroke:null!==s&&void 0!==s?s:"none",strokeWidth:null!==(t=n.strokeWidth)&&void 0!==t?t:0},e.eventHandlers))},ie=function(e){var t,n=e.polygon,r=e.selected,a=Object(u.d)(ee(n.fillColorId)),i=r?ne:a,s=Object(u.d)(ee(n.strokeColorId));return Object(c.jsx)("polygon",Object(z.a)({points:n.points.map((function(e){return"".concat(e.x,",").concat(e.y)})).join(" "),fill:null!==i&&void 0!==i?i:"none",stroke:null!==s&&void 0!==s?s:"none",strokeWidth:null!==(t=n.strokeWidth)&&void 0!==t?t:0},e.eventHandlers))},se=function(e){var t=e.shape;switch(t.type){case J.TYPE_LINE:return Object(c.jsx)(ce,{line:t,eventHandlers:e.eventHandlers,selected:e.selected});case J.TYPE_POLYLINE:return Object(c.jsx)(re,{polyline:t,eventHandlers:e.eventHandlers,selected:e.selected});case J.TYPE_CIRCLE:return Object(c.jsx)(ae,{circle:t,eventHandlers:e.eventHandlers,selected:e.selected});case J.TYPE_POLYGON:return Object(c.jsx)(ie,{polygon:t,eventHandlers:e.eventHandlers,selected:e.selected});default:return null}};function le(){var e=0;return{setLastId:function(t){return e=t},getNextId:function(){return++e}}}var oe,je,ue=le(),de=le(),be=le(),Oe=function(e){Object(G.a)(n,e);var t=Object(H.a)(n);function n(){return Object(Y.a)(this,n),t.apply(this,arguments)}return Object(A.a)(n,[{key:"onClick",value:function(e,t,n){return e.point1?(t(S(Object(z.a)(Object(z.a)({},e),{},{id:ue.getNextId()}))),this.getInitialState()):Object(z.a)(Object(z.a)({},e),{},{point1:n})}},{key:"onMouseMove",value:function(e,t,n){return e.point1?Object(z.a)(Object(z.a)({},e),{},{point2:n}):e}},{key:"renderShape",value:function(e){return e.point1&&e.point2?Object(c.jsx)(se,{shape:e}):null}},{key:"getInitialState",value:function(){return{type:J.TYPE_LINE,zIndex:0,strokeColorId:0,strokeWidth:2}}}]),n}(F),he=n(17),fe=function(e){Object(G.a)(n,e);var t=Object(H.a)(n);function n(){return Object(Y.a)(this,n),t.apply(this,arguments)}return Object(A.a)(n,[{key:"onClick",value:function(e,t,n){return Object(z.a)(Object(z.a)({},e),{},{points:e.points.concat(n)})}},{key:"onMouseMove",value:function(e,t,n){var c=Object(he.a)(e.points);return c.pop(),c.push(n),Object(z.a)(Object(z.a)({},e),{},{points:c})}},{key:"onFinish",value:function(e,t){var n=Object(he.a)(e.points);return n.pop(),t(S(Object(z.a)(Object(z.a)({},e),{},{points:n,id:ue.getNextId()}))),this.getInitialState()}},{key:"renderShape",value:function(e){return Object(c.jsx)(se,{shape:e})}},{key:"getInitialState",value:function(){return{type:J.TYPE_POLYLINE,zIndex:0,strokeColorId:0,strokeWidth:2,points:[],id:0}}}]),n}(F),xe=function(e){Object(G.a)(n,e);var t=Object(H.a)(n);function n(){return Object(Y.a)(this,n),t.apply(this,arguments)}return Object(A.a)(n,[{key:"onClick",value:function(e,t,n){return e.center?(t(S(Object(z.a)(Object(z.a)({},e),{},{id:ue.getNextId()}))),this.getInitialState()):Object(z.a)(Object(z.a)({},e),{},{center:n})}},{key:"onMouseMove",value:function(e,t,c){return e.center?Object(z.a)(Object(z.a)({},e),{},{r:n.getDistance(e.center,c)}):e}},{key:"renderShape",value:function(e){return e.center&&e.r?Object(c.jsx)(se,{shape:e}):null}},{key:"getInitialState",value:function(){return{type:J.TYPE_CIRCLE,zIndex:0,fillColorId:0,strokeWidth:null,strokeColorId:null}}}],[{key:"getDistance",value:function(e,t){var n=t.x-e.x,c=t.y-e.y;return Math.sqrt(n*n+c*c)}}]),n}(F),pe=function(e){Object(G.a)(n,e);var t=Object(H.a)(n);function n(){return Object(Y.a)(this,n),t.apply(this,arguments)}return Object(A.a)(n,[{key:"onClick",value:function(e,t,n){return e.points.length>0&&n.x===e.points[0].x&&n.y===e.points[0].y?this.onFinish(e,t):Object(z.a)(Object(z.a)({},e),{},{points:e.points.concat([n,n])})}},{key:"onMouseMove",value:function(e,t,n){if(0===e.points.length)return e;var c=Object(he.a)(e.points);return c.pop(),c.push(n),Object(z.a)(Object(z.a)({},e),{},{points:c})}},{key:"onFinish",value:function(e,t){var n=Object(he.a)(e.points);return n.pop(),t(S(Object(z.a)(Object(z.a)({},e),{},{points:n,id:ue.getNextId()}))),this.getInitialState()}},{key:"renderShape",value:function(e){return Object(c.jsx)(se,{shape:e})}},{key:"getInitialState",value:function(){return{type:J.TYPE_POLYGON,zIndex:0,fillColorId:0,points:[],strokeColorId:null,strokeWidth:null,id:0}}}]),n}(F);!function(e){e[e.SELECT=0]="SELECT",e[e.LINE=1]="LINE",e[e.POLYLINE=2]="POLYLINE",e[e.CIRCLE=3]="CIRCLE",e[e.POLYGON=4]="POLYGON"}(je||(je={}));var ve=(oe={},Object(M.a)(oe,je.SELECT,new W),Object(M.a)(oe,je.LINE,new Oe),Object(M.a)(oe,je.POLYLINE,new fe),Object(M.a)(oe,je.CIRCLE,new xe),Object(M.a)(oe,je.POLYGON,new pe),oe),me=function(e){return e.editor.gridSize},Ne=function(e){return e.editor.elements},ye=function(e){return e.editor.selectedTool},ke=function(e){return e.editor.selectedIdx},Ce="TILES_SET_TILE",ge="TILES_DELETE_TILE",Ee="TILES_SET_TILES",Ie="TILES_DUPLICATE_TILE",Te="TILES_ROTATE";function Le(e,t){return{type:Te,idx:e,ccw:t}}var Se=Object(v.a)("svg-editor"),Pe=function(){var e=Object(u.c)(),t=Object(u.d)(ye),n=Object(u.d)(Ne),a=Object(o.f)(),i=Object(o.g)(),s=i.id?parseInt(i.id):null,l=Object(r.useCallback)((function(){var t;e((t={id:null!==s?s:be.getNextId(),elements:n},{type:Ce,tile:t})),a.push("/tiles")}),[n,e,a,s]);return Object(c.jsxs)("div",{className:Se("toolbar"),children:[Object(c.jsx)("button",{className:"button",onClick:l,children:"Save"}),Object(c.jsxs)("div",{className:"buttons has-addons is-centered",children:[Object(c.jsx)("button",{className:"button"+(t===je.SELECT?" is-dark":""),onClick:function(){return e(R(je.SELECT))},children:"Select"}),Object(c.jsx)("button",{className:"button"+(t===je.LINE?" is-dark":""),onClick:function(){return e(R(je.LINE))},children:"Line"}),Object(c.jsx)("button",{className:"button"+(t===je.POLYLINE?" is-dark":""),onClick:function(){return e(R(je.POLYLINE))},children:"Polyline"}),Object(c.jsx)("button",{className:"button"+(t===je.CIRCLE?" is-dark":""),onClick:function(){return e(R(je.CIRCLE))},children:"Circle"}),Object(c.jsx)("button",{className:"button"+(t===je.POLYGON?" is-dark":""),onClick:function(){return e(R(je.POLYGON))},children:"Polygon"})]})]})},Re=Object(v.a)("scrollable"),we=function(e){return Object(c.jsx)("div",{className:Re(),children:Object(c.jsx)("div",{className:Re("content"),children:e.children})})};function _e(e){var t=Object(r.useState)(e.value),n=Object(O.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){a(e.value)}),[e.value]),[c,a]}function Me(e,t,n){var c=_e(e),a=Object(O.a)(c,2),i=a[0],s=a[1],l=Object(r.useState)(),o=Object(O.a)(l,2),j=o[0],u=o[1],d=Object(r.useCallback)((function(c){if(null===c)return e.required?u("This field is required"):u(void 0),s(c),void e.onChange(c);if(t(c)){s(c);for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];var l=n.apply(void 0,[c].concat(a)),o=l.success,j=l.formatted;o&&e.onChange(j)}}),[s,e.onChange,e.required,n,t]);return[null!==i&&void 0!==i?i:"",null!==j&&void 0!==j?j:e.error,d]}var Ye=function(e){var t=Me(e,Object(r.useCallback)((function(e){return/^-?\d*$/.test(e)}),[]),Object(r.useCallback)((function(e){var t=parseInt(e,10);return{success:!isNaN(t),formatted:t}}),[])),n=Object(O.a)(t,3),a=n[0],i=n[1],s=n[2],l=Object(r.useCallback)((function(e){var t,n=null!==(t=e.target.value)&&void 0!==t?t:null;s(""===n?null:n)}),[s]);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("input",{type:"number",className:"input",onChange:l,value:a})}),i&&Object(c.jsx)("p",{className:"help is-danger",children:i})]})},Ae=function(e){var t=Me(e,Object(r.useCallback)((function(e){return/^-?\d*(\d\.\d*)?$/.test(e)}),[]),Object(r.useCallback)((function(e){var t=parseFloat(e);return{success:!isNaN(t),formatted:t}}),[])),n=Object(O.a)(t,3),a=n[0],i=n[1],s=n[2],l=Object(r.useCallback)((function(e){var t=e.target.value;s(""===t?null:t)}),[s]);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("input",{type:"number",className:"input",onChange:l,value:a,step:"0.1"})}),i&&Object(c.jsx)("p",{className:"help is-danger",children:i})]})},Ge=function(e){var t,n,a=Object(r.useCallback)((function(t,n){e.onChange(Object(z.a)(Object(z.a)({},e.value),{},Object(M.a)({},t,n)))}),[e.onChange,e.value]);return Object(c.jsxs)("div",{className:"control",children:[Object(c.jsxs)("div",{className:"columns",children:[Object(c.jsxs)("div",{className:"column",children:[Object(c.jsx)("span",{children:"X"}),Object(c.jsx)(Ae,{onChange:function(e){return a("x",e)},required:e.required,value:null===(t=e.value)||void 0===t?void 0:t.x})]}),Object(c.jsxs)("div",{className:"column",children:[Object(c.jsx)("span",{children:"Y"}),Object(c.jsx)(Ae,{onChange:function(e){return a("y",e)},required:e.required,value:null===(n=e.value)||void 0===n?void 0:n.y})]})]}),e.error&&Object(c.jsx)("p",{className:"help is-danger",children:e.error})]})},He="PALETTE_ADD_COLOR",De="PALETTE_REMOVE_COLOR",Fe="PALETTE_UPDATE_COLOR";var We=n(144),ze=n(67),qe=n(145),Je="IMPORT_PROJECT";var Ue="#000",Be={0:Ue};var Ve=Object(v.a)("palette-picker"),Xe=function(){return Object(c.jsxs)("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:Ve("colornone"),children:[Object(c.jsx)("polyline",{points:"0,0 100,0 100,100 0,100 0,0",stroke:"#000",strokeWidth:"2",fill:"none"}),Object(c.jsx)("line",{x1:"100",y1:"0",x2:"0",y2:"100",stroke:"#000",strokeWidth:"2"}),Object(c.jsx)("line",{x1:"0",y1:"0",x2:"100",y2:"100",stroke:"#000",strokeWidth:"2"})]})},$e=a.a.forwardRef((function(e,t){var n=e.id,a=e.color,i=e.canEdit,s=e.onDelete,l=e.onSelect,o=e.selected,j=Object(r.useState)(!1),d=Object(O.a)(j,2),b=d[0],h=d[1],f=Object(u.c)(),x=Object(r.useCallback)((function(){h(!0)}),[h]),p=Object(r.useCallback)((function(){h(!1)}),[h]),v=Object(r.useCallback)((function(e){f(function(e,t){return{type:Fe,id:e,color:t}}(n,e.hex))}),[f,n]);return Object(c.jsxs)("div",{ref:t,onClick:function(){return l&&l(n)},className:Ve("item",o?["active"]:[]),children:[Object(c.jsxs)("div",{className:Ve("info"),children:[Object(c.jsx)("span",{className:Ve("thumb"),style:{backgroundColor:a},children:!a&&Object(c.jsx)(Xe,{})}),Object(c.jsx)("span",{className:Ve("label"),children:null!==a&&void 0!==a?a:"None"})]}),"number"===typeof n&&Object(c.jsxs)("div",{className:Ve("actions"),children:[i&&Object(c.jsx)("button",{onClick:x,className:Ve("action",["edit"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-pen"})})}),s&&Object(c.jsx)("button",{onClick:function(){return s(n)},className:Ve("action",["delete"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-trash"})})})]}),b&&Object(c.jsxs)("div",{className:Ve("popover"),children:[Object(c.jsx)("div",{className:Ve("overlay"),onClick:p}),Object(c.jsx)(We.a,{color:a,onChangeComplete:v})]})]})})),Ke=function(e){var t=_e(e),n=Object(O.a)(t,2),a=n[0],i=n[1],s=Object(u.d)(te),l=Object.keys(s).map((function(e){return parseInt(e,10)})),o=Object(r.useRef)(),j=Object(u.c)(),d=Object(r.useCallback)((function(t){i(t),e.onChange(t)}),[i,e.onChange]),b=Object(r.useCallback)((function(e){j(function(e){return{type:De,id:e}}(e))}),[j]),h=Object(r.useCallback)((function(){var e;j((e=de.getNextId(),{type:He,id:e,color:Ue}))}),[j]);return Object(r.useEffect)((function(){var e;null===(e=o.current)||void 0===e||e.scrollIntoView()}),[]),Object(c.jsx)("div",{className:Ve(),children:Object(c.jsxs)("div",{className:Ve("input"),children:[!e.required&&Object(c.jsx)($e,{id:null,onSelect:d,selected:null===a}),l.map((function(e){return Object(c.jsx)($e,{id:e,color:s[e],canEdit:!0,onDelete:0===e?void 0:b,onSelect:d,selected:a===e,ref:a===e?o:void 0},e)})),Object(c.jsxs)("div",{onClick:h,className:Ve("item",["new"]),children:[Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-plus"})}),"Add color"]})]})})},Qe=n(140);var Ze,et=function(e){var t=e.control,n=e.label,a=e.onChange,i=e.validators,s=Object(ze.a)(e,["control","label","onChange","validators"]),l=Object(r.useState)(),o=Object(O.a)(l,2),j=o[0],u=o[1],d=Object(r.useCallback)((function(e){var t,n=Object(Qe.a)(null!==i&&void 0!==i?i:[]);try{for(n.s();!(t=n.n()).done;){var c=(0,t.value)(e);if(c)return void u(c)}}catch(c){n.e(c)}finally{n.f()}u(void 0),a(e)}),[a,i]);return Object(c.jsxs)("div",{className:"field",children:[Object(c.jsx)("label",{className:"label",children:n}),Object(c.jsx)(t,Object(z.a)({onChange:d,error:j},s))]})},tt=(Ze={},Object(M.a)(Ze,D.INTEGER,Ye),Object(M.a)(Ze,D.FLOAT,Ae),Object(M.a)(Ze,D.POINT,Ge),Object(M.a)(Ze,D.COLOR,Ke),Ze);function nt(e){var t=tt[e.property.type],n=Object(r.useCallback)((function(t){e.onChange(e.propName,t)}),[e.onChange,e.propName]);return Object(c.jsx)(et,{control:t,label:e.property.label,value:e.value,onChange:n,required:e.property.required,validators:e.property.validators})}var ct=function(e){var t=Object.keys(e.definitions);return Object(c.jsx)("div",{children:t.map((function(t){return Object(c.jsx)(nt,{property:e.definitions[t],propName:t,value:e.valueAccessor(t),onChange:e.onChange},t)}))})},rt=Object(v.a)("svg-properties"),at=function(){var e,t=Object(u.d)(ke),n=Object(u.d)((e=null!==t&&void 0!==t?t:0,function(t){return t.editor.elements[e]})),a=Object(u.c)(),i=Object(r.useCallback)((function(e,n){a(function(e,t,n){return{type:E,elemIdx:e,propName:t,value:n}}(t,e,n))}),[t,a]),s=Object(r.useCallback)((function(e){return n[e]}),[n]);return Object(c.jsx)("div",{className:rt(),children:Object(c.jsxs)(we,{children:[Object(c.jsx)("h2",{className:"title "+rt("title"),children:"Properties"}),null===t?Object(c.jsx)("p",{className:rt("text",["unselected"]),children:"No shape selected"}):Object(c.jsx)(ct,{definitions:Z[n.type],valueAccessor:s,onChange:i})]})})},it=function(e){var t,n,r=null!==(t=e.padding)&&void 0!==t?t:0,a=null!==(n=e.blk)&&void 0!==n?n:function(){return""};return Object(c.jsxs)("svg",Object(z.a)(Object(z.a)({preserveAspectRatio:"xMidYMid meet",ref:e.svgRef,width:e.width,height:e.height,viewBox:"".concat(0-r," ").concat(0-r," ").concat(100+2*r," ").concat(100+2*r),className:a("svg")},e.eventHandlers),{},{children:[e.children,e.overlay&&Object(c.jsx)("g",{className:"no-pointer-events",children:e.overlay})]}))},st=function(e){var t=100/e.gridSize+1,n=e.gridSize,r=Array(t).fill(0);return Object(c.jsxs)(c.Fragment,{children:[r.map((function(e,t){return Object(c.jsx)("line",{x1:0,y1:t*n,x2:100,y2:t*n,stroke:"#999",strokeOpacity:.5,strokeWidth:1,vectorEffect:"non-scaling-stroke"},t)})),r.map((function(e,t){return Object(c.jsx)("line",{y1:0,x1:t*n,y2:100,x2:t*n,stroke:"#999",strokeOpacity:.5,strokeWidth:1,vectorEffect:"non-scaling-stroke"},t)}))]})},lt=function(e){return e.tiles},ot=Object(v.a)("svg-editor");function jt(e){return e.x>=0&&e.y>=0&&e.x<=100&&e.y<=100}var ut=function(){var e=function(){var e=Object(r.useState)(null),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),i=Object(O.a)(a,2),s=i[0],l=i[1];return[Object(r.useCallback)((function(e){null!==e&&(c(e),l(e.createSVGPoint()))}),[c]),Object(r.useCallback)((function(e,t){var c;if(null===s)return{x:0,y:0};s.x=e.clientX,s.y=e.clientY;var r=s.matrixTransform(null===(c=n.getScreenCTM())||void 0===c?void 0:c.inverse());return{x:Math.round(r.x/t)*t,y:Math.round(r.y/t)*t}}),[s,n])]}(),t=Object(O.a)(e,2),n=t[0],a=t[1],i=Object(u.d)(me),s=Object(u.d)(ye),l=Object(u.d)(ke),j=Object(u.d)(Ne),d=Object(r.useState)(null),b=Object(O.a)(d,2),h=b[0],f=b[1],x=function(e){var t=Object(u.c)(),n=Object(r.useState)(ve[e]),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(a.getInitialState()),l=Object(O.a)(s,2),o=l[0],j=l[1];Object(r.useEffect)((function(){i(ve[e]),j(ve[e].getInitialState())}),[e]);var d=Object(r.useCallback)((function(e){j(a.onClick(o,t,e))}),[o,t,j,a]),b=Object(r.useCallback)((function(e){j(a.onMouseMove(o,t,e))}),[o,t,j,a]),h=Object(r.useCallback)((function(e){j(a.onMouseLeave(o,t,e))}),[o,t,j,a]),f=Object(r.useCallback)((function(e,n){j(a.onShapeClick(o,t,e,n))}),[o,t,j,a]);return{svgEventHandlers:{onClick:d,onMouseMove:b,onMouseLeave:h,onFinish:Object(r.useCallback)((function(){j(a.onFinish(o,t))}),[o,t,j,a])},onShapeClick:f,renderedShape:a.renderShape(o),showHoverPoint:a.showHoverPoint(),toolType:a.toolType()}}(s),p=Object(u.c)(),v=Object(o.g)(),m=v.id?parseInt(v.id):null,N=Object(u.d)(function(e){return function(t){return t.tiles.find((function(t){return t.id===e}))}}(m)),y=Object(r.useCallback)((function(e){var t=a(e,i);jt(t)&&x.svgEventHandlers.onClick(t)}),[a,i,x.svgEventHandlers.onClick]),k=Object(r.useCallback)((function(e){var t=a(e,i);jt(t)&&f(t)}),[i,a]),C=Object(r.useCallback)((function(e){f(null);var t=a(e,i);jt(t)&&x.svgEventHandlers.onMouseLeave(t)}),[f,a,i,x.svgEventHandlers.onMouseLeave]),g=Object(r.useCallback)((function(e,t){x.toolType===_.MANIPULATOR&&(e.stopPropagation(),x.onShapeClick(t,j[t]))}),[x.onShapeClick,j]),E=Object(r.useCallback)((function(e){e.preventDefault(),x.svgEventHandlers.onFinish()}),[x.svgEventHandlers.onFinish]);return Object(r.useEffect)((function(){h&&x.svgEventHandlers.onMouseMove(h)}),[h]),Object(r.useEffect)((function(){p({type:L}),null!==m&&N&&p(w(N.elements))}),[m,N,p]),Object(c.jsx)(it,{svgRef:n,blk:ot,padding:i/2,eventHandlers:{onClick:y,onMouseMove:k,onMouseLeave:C,onContextMenu:E},overlay:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(st,{gridSize:i}),h&&x.showHoverPoint&&Object(c.jsx)("circle",{cx:h.x,cy:h.y,r:1,stroke:"black",strokeWidth:2,vectorEffect:"non-scaling-stroke"})]}),children:Object(c.jsxs)(it,{width:100,height:100,children:[j.map((function(e,t){return Object(c.jsx)(se,{selected:t===l,shape:e,eventHandlers:{onClick:function(e){return g(e,t)}}},e.id)})),x.renderedShape]})})},dt=n(32),bt=Object(v.a)("svg-element-viewer"),Ot=function(e){var t="Unknown";switch(e.type){case J.TYPE_POLYGON:t="Polygon";break;case J.TYPE_CIRCLE:t="Circle";break;case J.TYPE_POLYLINE:t="Polyline";break;case J.TYPE_LINE:t="Line"}return"".concat(t," #").concat(e.id)},ht=function(){var e=Object(u.d)(Ne),t=Object(u.d)(ke),n=Object(u.c)(),a=Object(r.useCallback)((function(t,c){t.stopPropagation(),n(P(e.length-c-1))}),[n,e]),i=Object(r.useCallback)((function(t){t.destination&&n(w(h(e,e.length-t.source.index-1,e.length-t.destination.index-1)))}),[e,n]),s=Object(r.useCallback)((function(e,t){e.stopPropagation(),n(function(e){return{type:T,id:e}}(t))}),[n]),l=Object(r.useCallback)((function(){n(P(null))}),[n]),o=Object(he.a)(e);return o.reverse(),Object(c.jsx)(dt.a,{onDragEnd:i,children:Object(c.jsx)("div",{className:bt(),onClick:l,children:Object(c.jsx)(we,{children:Object(c.jsxs)("div",{className:bt("content"),children:[Object(c.jsx)("h2",{className:"title",children:"Elements"}),Object(c.jsx)(dt.c,{droppableId:"elements",children:function(n,r){return Object(c.jsxs)("div",Object(z.a)(Object(z.a)({},n.droppableProps),{},{ref:n.innerRef,className:bt("items"),children:[o.map((function(n,r){return Object(c.jsx)(dt.b,{draggableId:n.id.toString(),index:r,children:function(i){return Object(c.jsxs)("div",Object(z.a)(Object(z.a)(Object(z.a)({onClick:function(e){return a(e,r)},className:bt("item",t===e.length-r-1?["active"]:[])},i.draggableProps),i.dragHandleProps),{},{ref:i.innerRef,children:[Object(c.jsxs)("div",{className:bt("info"),children:[Object(c.jsx)("div",{className:bt("thumb"),children:Object(c.jsx)(it,{blk:bt,children:Object(c.jsx)(se,{shape:n})})}),Object(c.jsx)("div",{className:bt("label"),children:Ot(n)})]}),Object(c.jsx)("div",{className:bt("actions"),children:Object(c.jsx)("button",{onClick:function(e){return s(e,n.id)},className:bt("action",["delete"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-trash"})})})})]}),n.id)}},n.id)})),n.placeholder]}))}})]})})})})},ft=Object(v.a)("svg-editor"),xt=function(){return Object(c.jsx)("div",{className:ft(),children:Object(c.jsx)(N,{horizontal:!0,left:Object(c.jsx)(ht,{}),right:Object(c.jsx)(at,{}),children:Object(c.jsx)(N,{left:Object(c.jsx)(Pe,{}),children:Object(c.jsx)("div",{className:ft("wrap"),children:Object(c.jsx)("div",{className:ft("content"),children:Object(c.jsx)(ut,{})})})})})})},pt=function(){return Object(c.jsx)(j,{header:Object(c.jsx)(x,{}),footer:Object(c.jsx)(p,{}),children:Object(c.jsx)(xt,{})})},vt=n(141),mt=n.n(vt),Nt="GENERATOR_SET_ROWS",yt="GENERATOR_SET_COLS",kt="GENERATOR_SET_SELECTOR",Ct="GENERATOR_SET_SELECTOR_PROPERTY";var gt=function(e){return e.generator.rows},Et=function(e){return e.generator.cols},It=function(e){return e.generator.tileSelector},Tt=function(e){return e.generator.tileSelectorProperties};function Lt(e){var t=Me(e,Object(r.useCallback)((function(e){return!0}),[]),Object(r.useCallback)((function(e){return{success:!0,formatted:e}}),[])),n=Object(O.a)(t,3),a=n[0],i=n[1],s=n[2],l=Object(r.useCallback)((function(e){var t=e.target.value;s(t)}),[s]);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("div",{className:"select",children:Object(c.jsx)("select",{className:"input",onChange:l,value:a,children:e.choices&&e.choices.map((function(e){return Object(c.jsx)("option",{value:e.key,children:e.label},e.key)}))})})}),i&&Object(c.jsx)("p",{className:"help is-danger",children:i})]})}var St,Pt,Rt,wt,_t,Mt,Yt,At,Gt,Ht,Dt=n(49),Ft=n(50);n(263);function Wt(e){return e.selectTile=e.selectTile.bind(e),e}function zt(e,t,n,c){return function(r,a){"__propertyDefinitions"in r||Object.defineProperty(r,"__propertyDefinitions",{value:{}}),r.__propertyDefinitions[a]={type:e,label:t,required:n,validators:c}}}function qt(e){var t;return null!==(t=e.__propertyDefinitions)&&void 0!==t?t:{}}var Jt=Wt({label:"Linear selector",description:"step * index + offset",defaultProperties:new(St=zt(D.INTEGER,"Step",!0,[U(0)]),Pt=zt(D.INTEGER,"Offset",!0,[U(0)]),Rt=function e(t,n){Object(Y.a)(this,e),Object(Dt.a)(this,"step",wt,this),Object(Dt.a)(this,"offset",_t,this),this.step=t,this.offset=n},wt=Object(Ft.a)(Rt.prototype,"step",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_t=Object(Ft.a)(Rt.prototype,"offset",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rt)(1,0),selectTile:function(e,t,n,c){return c.step*e+c.offset}}),Ut={tileSelectors:{LinearSelector:Jt,GeometricSelector:Wt({label:"Geometric selector",description:"lastValue * q",defaultProperties:new(Mt=zt(D.FLOAT,"q",!0,[U(0)]),Yt=zt(D.INTEGER,"Initial",!0,[U(0)]),At=function e(t,n){Object(Y.a)(this,e),Object(Dt.a)(this,"q",Gt,this),Object(Dt.a)(this,"initial",Ht,this),this.q=t,this.initial=n},Gt=Object(Ft.a)(At.prototype,"q",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht=Object(Ft.a)(At.prototype,"initial",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),At)(1.5,1),state:{last:0},selectTile:function(e,t,n,c){var r,a;return 0===e&&(this.state={last:c.initial}),this.state.last=(null!==(r=null===(a=this.state)||void 0===a?void 0:a.last)&&void 0!==r?r:1)*c.q,this.state.last}}),FibonacciSelector:Wt({label:"Fibonacci selector",description:"Selector using Fibonacci series",defaultProperties:new function e(){Object(Y.a)(this,e)},state:{n1:1,n2:1},selectTile:function(e,t,n,c){var r;if(0===e)return this.state={n1:1,n2:1},1;if(1===e)return 1;var a=null===(r=this.state)||void 0===r?void 0:r.n1;return this.state.n1=this.state.n2,this.state.n2=this.state.n2+a,this.state.n2}})}};function Bt(e){return Ut.tileSelectors[e]}var Vt=Ut,Xt=function(e){var t=e.tile;return Object(c.jsx)("svg",{viewBox:"0 0 100 100",width:100,height:100,xmlns:"http://www.w3.org/2000/svg",children:t.elements.map((function(e){return Object(c.jsx)(se,{shape:e},e.id)}))})},$t=function(e){var t=e.tiles.length,n=Object(r.useMemo)((function(){return Array(e.rows).fill(0)}),[e.rows]),a=Object(r.useMemo)((function(){return Array(e.cols).fill(0)}),[e.cols]),i=Bt(e.tileSelector),s=Object(r.useMemo)((function(){return n.map((function(n,c){return a.map((function(n,r){var a=c*e.cols+r,s=i.selectTile(a,c,r,e.tileSelectorProperties),l=e.tiles[Math.round(s)%t];return null===l||void 0===l?void 0:l.id}))}))}),[n,a,i,t,e.cols,e.tiles,e.tileSelectorProperties]),l=Object(r.useMemo)((function(){return e.tiles.map((function(e){return Object(c.jsx)("g",{id:"tile-".concat(e.id),children:Object(c.jsx)(Xt,{tile:e},e.id)},e.id)}))}),[e.tiles]);return Object(c.jsxs)("svg",{shapeRendering:"crispEdges",version:"1.1",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 ".concat(100*e.cols," ").concat(100*e.rows),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[Object(c.jsx)("defs",{children:l}),s.map((function(t,n){return t.map((function(t,r){return Object(c.jsx)("use",{xlinkHref:"#tile-".concat(t),x:100*r,y:100*n},n*e.cols+r)}))}))]})},Kt=function(){var e=Object(u.d)(lt),t=Object(u.d)(Et),n=Object(u.d)(gt),r=Object(u.d)(It),a=Object(u.d)(Tt);return Object(c.jsx)(c.Fragment,{children:e.length&&Object(c.jsx)($t,{rows:n,cols:t,tiles:e,tileSelector:r,tileSelectorProperties:a})})},Qt=n(21),Zt=n(142),en={elements:[],gridSize:5,selectedTool:je.SELECT,selectedIdx:null};var tn=[{id:1,elements:[{type:J.TYPE_POLYLINE,zIndex:0,strokeColorId:0,strokeWidth:2,points:[{x:30,y:40},{x:60,y:75},{x:90,y:70},{x:70,y:0},{x:35,y:85}],id:1}]},{id:2,elements:[{type:J.TYPE_LINE,zIndex:0,strokeColorId:0,strokeWidth:2,point1:{x:20,y:35},point2:{x:80,y:85},id:2},{type:J.TYPE_LINE,zIndex:0,strokeColorId:0,strokeWidth:2,point1:{x:30,y:80},point2:{x:55,y:30},id:3}]},{id:3,elements:[{type:J.TYPE_POLYGON,zIndex:0,fillColorId:0,points:[{x:75,y:25},{x:25,y:60},{x:25,y:60},{x:75,y:85},{x:75,y:85},{x:15,y:10},{x:15,y:10}],strokeColorId:null,strokeWidth:null,id:4}]}];function nn(e,t){var n=e.x-50,c=e.y-50;return{x:(t?c:-c)+50,y:(t?-n:n)+50}}var cn,rn={rows:17,cols:17,tileSelector:(cn={LinearSelector:Jt},Object.keys(cn)[0]),tileSelectorProperties:Jt.defaultProperties};var an=Object(Qt.combineReducers)({editor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:var n=e.elements.length,c=[].concat(Object(he.a)(e.elements),[t.shape]);return Object(z.a)(Object(z.a)({},e),{},{elements:c,selectedIdx:n});case k:return Object(z.a)(Object(z.a)({},e),{},{gridSize:t.size});case C:return Object(z.a)(Object(z.a)({},e),{},{selectedIdx:t.idx});case g:return Object(z.a)(Object(z.a)({},e),{},{selectedTool:t.tool});case E:return Object(z.a)(Object(z.a)({},e),{},{elements:e.elements.map((function(e,n){return n===t.elemIdx?Object(z.a)(Object(z.a)({},e),{},Object(M.a)({},t.propName,t.value)):e}))});case I:var r=null!==e.selectedIdx?t.elements.findIndex((function(t){var n;return t.id===e.elements[null!==(n=e.selectedIdx)&&void 0!==n?n:0].id})):null;return Object(z.a)(Object(z.a)({},e),{},{elements:t.elements,selectedIdx:r});case T:var a=e.selectedIdx,i=e.elements.filter((function(n,c){var r=n.id===t.id;return r&&e.selectedIdx===c&&(a=null),!r}));return Object(z.a)(Object(z.a)({},e),{},{elements:i,selectedIdx:a});case L:return en;default:return e}},palette:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case He:return Object(z.a)(Object(z.a)({},e),{},Object(M.a)({},t.id,t.color));case De:var n=t.id,c=(e[n],Object(ze.a)(e,[n].map(qe.a)));return c;case Fe:return Object(z.a)(Object(z.a)({},e),{},Object(M.a)({},t.id,t.color));case Je:return JSON.parse(JSON.stringify(t.data.palette));default:return e}},tiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ce:var n=e.findIndex((function(e){return e.id===t.tile.id}));return n>=0?e.map((function(e){return e.id===t.tile.id?Object(z.a)({},t.tile):e})):[].concat(Object(he.a)(e),[t.tile]);case ge:return e.filter((function(e){return e.id!==t.id}));case Ee:return Object(he.a)(t.tiles);case Je:return JSON.parse(JSON.stringify(t.data.tiles));case Ie:var c=e[t.idx],r=JSON.parse(JSON.stringify(c));r.id=t.newId;var a=Object(he.a)(e);return a.splice(t.idx+1,0,r),a;case Te:var i=e[t.idx].elements.map((function(e){switch(e.type){case J.TYPE_CIRCLE:var n=e;return Object(z.a)(Object(z.a)({},n),{},{center:nn(n.center,t.ccw)});case J.TYPE_LINE:var c=e;return Object(z.a)(Object(z.a)({},c),{},{point1:nn(c.point1,t.ccw),point2:nn(c.point2,t.ccw)});case J.TYPE_POLYGON:var r=e;return Object(z.a)(Object(z.a)({},r),{},{points:r.points.map((function(e){return nn(e,t.ccw)}))});case J.TYPE_POLYLINE:var a=e;return Object(z.a)(Object(z.a)({},a),{},{points:a.points.map((function(e){return nn(e,t.ccw)}))});default:return e}})),s=Object(he.a)(e);return s[t.idx]=Object(z.a)(Object(z.a)({},e[t.idx]),{},{elements:i}),s;default:return e}},generator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nt:return Object(z.a)(Object(z.a)({},e),{},{rows:t.rows});case yt:return Object(z.a)(Object(z.a)({},e),{},{cols:t.cols});case kt:return Object(z.a)(Object(z.a)({},e),{},{tileSelector:t.selector,tileSelectorProperties:Bt(t.selector).defaultProperties});case Ct:return Object(z.a)(Object(z.a)({},e),{},{tileSelectorProperties:Object(z.a)(Object(z.a)({},e.tileSelectorProperties),{},Object(M.a)({},t.prop,t.value))});case Je:return JSON.parse(JSON.stringify(t.data.generator));default:return e}}}),sn=Object(Qt.createStore)(an,Object(Zt.composeWithDevTools)()),ln=Object(v.a)("gen-settings"),on=function(){var e=Object(u.d)(gt),t=Object(u.d)(Et),n=Object(u.d)(It),a=Bt(n),i=Object(u.d)(Tt),s=Object(u.c)(),l=Object(r.useCallback)((function(e){s(function(e){return{type:Nt,rows:e}}(null!==e&&void 0!==e?e:0))}),[s]),o=Object(r.useCallback)((function(e){s(function(e){return{type:yt,cols:e}}(null!==e&&void 0!==e?e:0))}),[s]),j=Object(r.useCallback)((function(e){s({type:kt,selector:e})}),[s]),d=Object(r.useMemo)((function(){return Object.keys(Vt.tileSelectors).map((function(e){return{key:e,label:Bt(e).label}}))}),[Vt.tileSelectors]),b=Object(r.useCallback)((function(e){return i[e]}),[i]),O=Object(r.useCallback)((function(e,t){s(function(e,t){return{type:Ct,prop:e,value:t}}(e,t))}),[s]),h=Object(r.useCallback)((function(){f("mosaic.svg",mt.a.renderToStaticMarkup(Object(c.jsx)(u.a,{store:sn,children:Object(c.jsx)(Kt,{})})))}),[]);return Object(c.jsx)("div",{className:ln(),children:Object(c.jsx)(we,{children:Object(c.jsxs)("div",{className:ln("content"),children:[Object(c.jsx)("h1",{className:"title",children:"Settings"}),Object(c.jsx)("button",{onClick:h,className:"button is-fullwidth is-link mb-3",children:"Export mosaic"}),Object(c.jsx)(et,{control:Ye,label:"Rows",onChange:l,validators:[U(1)],required:!0,value:e}),Object(c.jsx)(et,{control:Ye,label:"Columns",onChange:o,validators:[U(1)],required:!0,value:t}),Object(c.jsxs)("div",{className:"field-container",children:[Object(c.jsx)(et,{label:"Tile selector",control:Lt,onChange:j,value:n,choices:d,required:!0}),Object(c.jsx)("p",{className:"help",children:a.description}),Object(c.jsx)(ct,{definitions:qt(a.defaultProperties),valueAccessor:b,onChange:O})]})]})})})},jn=Object(v.a)("generator"),un=function(){return Object(c.jsx)(j,{header:Object(c.jsx)(x,{}),footer:Object(c.jsx)(p,{}),children:Object(c.jsx)(N,{horizontal:!0,left:Object(c.jsx)(on,{}),children:Object(c.jsx)("div",{className:jn(),children:Object(c.jsx)("div",{className:jn("wrap"),children:Object(c.jsx)(Kt,{})})})})})},dn=Object(v.a)("tile-item"),bn=function(e){var t=e.onClick;return Object(c.jsx)("div",{onClick:t,className:dn(["new"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-plus fa-2x"})})})},On=function(e){var t=Object(u.c)(),n=Object(o.f)(),a=Object(r.useCallback)((function(){n.push("/tiles/".concat(e.tile.id))}),[e.tile,n]),i=Object(r.useCallback)((function(){var n;t((n=e.tile.id,{type:ge,id:n}))}),[e.tile,t]),s=Object(r.useCallback)((function(){var n,c;t((n=e.idx,c=be.getNextId(),{type:Ie,idx:n,newId:c}))}),[e.idx]),l=Object(r.useCallback)((function(){t(Le(e.idx,!0))}),[e.idx,t]),j=Object(r.useCallback)((function(){t(Le(e.idx,!1))}),[e.idx,t]);return Object(c.jsxs)("div",{className:dn(),children:[Object(c.jsxs)("div",{className:dn("thumb"),children:[Object(c.jsx)(it,{blk:dn,children:e.tile.elements.map((function(e){return Object(c.jsx)(se,{shape:e},e.id)}))}),Object(c.jsxs)("div",{className:dn("actions"),children:[Object(c.jsx)("button",{onClick:s,className:dn("action"),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-clone"})})}),Object(c.jsx)("button",{onClick:l,className:dn("action"),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-undo"})})}),Object(c.jsx)("button",{onClick:j,className:dn("action"),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-redo"})})}),Object(c.jsx)("button",{onClick:i,className:dn("action",["delete"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-trash"})})}),Object(c.jsx)("button",{onClick:a,className:dn("action"),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-pen"})})})]})]}),Object(c.jsx)("div",{className:dn("label"),children:Object(c.jsxs)("span",{className:"has-text-grey",children:["idx: ",e.idx]})})]})},hn=Object(v.a)("tiles"),fn=function(){var e=Object(u.d)(lt),t=Object(o.f)(),n=Object(r.useCallback)((function(){t.push("/tiles/new")}),[t]);return Object(c.jsx)(j,{header:Object(c.jsx)(x,{}),footer:Object(c.jsx)(p,{}),children:Object(c.jsx)(we,{children:Object(c.jsxs)("div",{className:hn(),children:[Object(c.jsxs)("div",{className:hn("heading"),children:[Object(c.jsx)("h1",{className:"title",children:"Tiles"}),Object(c.jsx)("p",{className:hn("actions"),children:Object(c.jsx)(l.b,{to:"/tiles/reorder",children:"Reorder"})})]}),Object(c.jsxs)("div",{className:hn("items"),children:[e.map((function(e,t){return Object(c.jsx)(On,{idx:t,tile:e},e.id)})),Object(c.jsx)(bn,{onClick:n})]})]})})})},xn=Object(v.a)("reorder"),pn=function(){var e=Object(u.d)(lt),t=Object(u.c)(),n=Object(r.useCallback)((function(n){n.destination&&t(function(e){return{type:Ee,tiles:e}}(h(e,n.source.index,n.destination.index)))}),[e,t]);return Object(c.jsx)(j,{header:Object(c.jsx)(x,{}),footer:Object(c.jsx)(p,{}),children:Object(c.jsx)(we,{children:Object(c.jsx)(dt.a,{onDragEnd:n,children:Object(c.jsxs)("div",{className:xn(),children:[Object(c.jsxs)("div",{className:xn("heading"),children:[Object(c.jsx)("h1",{className:"title",children:"Reorder tiles"}),Object(c.jsx)("p",{className:xn("actions"),children:Object(c.jsx)(l.b,{to:"/tiles",children:"Back"})})]}),Object(c.jsx)("p",{className:"subtitle",children:"Reorder tiles by drag & drop"}),Object(c.jsxs)("div",{className:xn("columns"),children:[Object(c.jsx)("div",{className:xn("col",["idx"]),children:e.map((function(e,t){return Object(c.jsx)("div",{className:xn("item",["idx"]),children:t},t)}))}),Object(c.jsx)(dt.c,{droppableId:"tiles",children:function(t,n){return Object(c.jsxs)("div",Object(z.a)(Object(z.a)({},t.droppableProps),{},{ref:t.innerRef,className:xn("col",["items"]),children:[e.map((function(e,t){return Object(c.jsx)(dt.b,{draggableId:e.id.toString(),index:t,children:function(t){return Object(c.jsxs)("div",Object(z.a)(Object(z.a)(Object(z.a)({},t.dragHandleProps),t.draggableProps),{},{ref:t.innerRef,className:xn("item",["tile"]),children:[Object(c.jsx)("div",{className:xn("thumb"),children:Object(c.jsx)(it,{blk:xn,children:e.elements.map((function(e){return Object(c.jsx)(se,{shape:e},e.id)}))})}),Object(c.jsxs)("div",{className:xn("label"),children:["ID: ",e.id]})]}))}},e.id)})),t.placeholder]}))}})]})]})})})})};function vn(e,t){e(function(e){return{type:Je,data:e}}(t));var n=Object.keys(t.palette).reduce((function(e,t){return Math.max(e,parseInt(t,10))}),0);de.setLastId(n);var c=t.tiles.reduce((function(e,t){return Math.max(e,t.id)}),0);be.setLastId(c);var r=t.tiles.reduce((function(e,t){return Math.max(e,t.elements.reduce((function(e,t){return Math.max(e,t.id)}),0))}),0);ue.setLastId(r)}var mn=Object(v.a)("import"),Nn=function(){var e=Object(r.useState)(),t=Object(O.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(),s=Object(O.a)(i,2),l=s[0],d=s[1],b=Object(o.f)(),h=Object(u.c)(),f=Object(r.useCallback)((function(e){d(void 0),a(e.target.files[0])}),[a]),v=Object(r.useCallback)((function(){if(n){var e=new FileReader;e.onload=function(e){var t;if(null===(t=e.target)||void 0===t?void 0:t.result)try{var n=JSON.parse(e.target.result);vn(h,n),b.push("/")}catch(c){d(c.message)}else d("Error reading file.")},e.readAsText(n)}else d("First choose a project file.")}),[n,h,b]);return Object(c.jsx)(j,{header:Object(c.jsx)(x,{}),footer:Object(c.jsx)(p,{}),children:Object(c.jsx)("div",{className:mn(),children:Object(c.jsx)("div",{className:"card",children:Object(c.jsx)("div",{className:"card-content",children:Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)("h1",{className:"mb-5",children:"Import project"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"field mb-5",children:[Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("div",{className:"file",children:Object(c.jsxs)("label",{className:"file-label",children:[Object(c.jsx)("input",{className:"file-input",type:"file",name:"projectFile",onChange:f}),Object(c.jsxs)("span",{className:"file-cta",children:[Object(c.jsx)("span",{className:"file-icon",children:Object(c.jsx)("i",{className:"fas fa-upload"})}),Object(c.jsx)("span",{className:"file-label",children:"Choose a file\u2026"})]})]})})}),Object(c.jsx)("p",{className:"help",children:"Choose a JSON file exported from this application."}),l&&Object(c.jsx)("p",{className:"help is-danger",children:l})]}),Object(c.jsx)("div",{className:"field",children:Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("button",{className:"button is-link",onClick:v,children:"Import"})})})]})})})})})},yn=n(143),kn=n.n(yn),Cn=function(){var e=Object(r.useState)(""),t=Object(O.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){fetch("https://raw.githubusercontent.com/EnkeyMC/TileMosaicGenerator/main/README.md").then((function(e){if(e.ok)return e.text();throw new Error("Request returned with status "+e.status+": "+e.statusText)})).then((function(e){return a(e)})).catch((function(e){return a("# Error loading readme\n\nReason: ".concat(e))}))}),[]),Object(c.jsx)(j,{header:Object(c.jsx)(x,{}),footer:Object(c.jsx)(p,{}),children:Object(c.jsx)(we,{children:Object(c.jsx)("div",{className:"container pt-6 pb-6",children:Object(c.jsx)(kn.a,{className:"content",children:n})})})})};var gn=function(){return Object(c.jsx)(l.a,{children:Object(c.jsxs)(o.c,{children:[Object(c.jsx)(o.a,{path:"/tiles/new",children:Object(c.jsx)(pt,{})}),Object(c.jsx)(o.a,{path:"/tiles/reorder",children:Object(c.jsx)(pn,{})}),Object(c.jsx)(o.a,{path:"/tiles/:id",children:Object(c.jsx)(pt,{})}),Object(c.jsx)(o.a,{path:"/tiles",children:Object(c.jsx)(fn,{})}),Object(c.jsx)(o.a,{path:"/import",children:Object(c.jsx)(Nn,{})}),Object(c.jsx)(o.a,{path:"/help",children:Object(c.jsx)(Cn,{})}),Object(c.jsx)(o.a,{path:"/",children:Object(c.jsx)(un,{})})]})})},En=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,346)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};n(337),n(341),n(342),n(343);s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(u.a,{store:sn,children:Object(c.jsx)(gn,{})})}),document.getElementById("root"));var In=localStorage.getItem("state");vn(sn.dispatch,In?JSON.parse(In):JSON.parse('{"version":{"MAJOR":0,"MINOR":1},"tiles":[{"id":10,"elements":[{"type":"POLYGON","zIndex":0,"fillColorId":0,"points":[{"x":0,"y":0},{"x":100,"y":100},{"x":100,"y":100},{"x":0,"y":100},{"x":0,"y":100}],"strokeColorId":null,"strokeWidth":null,"id":9}]},{"id":12,"elements":[{"type":"POLYGON","zIndex":0,"fillColorId":0,"points":[{"x":100,"y":100},{"x":0,"y":0},{"x":0,"y":0},{"x":100,"y":0},{"x":100,"y":0}],"strokeColorId":null,"strokeWidth":null,"id":9}]},{"id":11,"elements":[{"type":"POLYGON","zIndex":0,"fillColorId":0,"points":[{"x":100,"y":0},{"x":0,"y":100},{"x":0,"y":100},{"x":0,"y":0},{"x":0,"y":0}],"strokeColorId":null,"strokeWidth":null,"id":9}]},{"id":13,"elements":[{"type":"POLYGON","zIndex":0,"fillColorId":0,"points":[{"x":0,"y":100},{"x":100,"y":0},{"x":100,"y":0},{"x":100,"y":100},{"x":100,"y":100}],"strokeColorId":null,"strokeWidth":null,"id":9}]},{"id":14,"elements":[]},{"id":15,"elements":[{"type":"POLYGON","zIndex":0,"fillColorId":0,"points":[{"x":0,"y":0},{"x":100,"y":0},{"x":100,"y":0},{"x":100,"y":100},{"x":100,"y":100},{"x":0,"y":100},{"x":0,"y":100}],"strokeColorId":null,"strokeWidth":null,"id":10}]}],"generator":{"rows":18,"cols":21,"tileSelector":"LinearSelector","tileSelectorProperties":{"step":1,"offset":0}},"palette":{"0":"#000"}}')),window.onbeforeunload=function(){var e=JSON.stringify(b(sn.getState()));localStorage.setItem("state",e)},En()}},[[344,1,2]]]);
//# sourceMappingURL=main.7b8aa888.chunk.js.map