(this["webpackJsonptile-mosaic-generator"]=this["webpackJsonptile-mosaic-generator"]||[]).push([[0],{113:function(e,t,n){},231:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n.n(a),i=n(33),s=n.n(i),l=(n(113),n(16)),o=n(9),u=function(e){return Object(c.jsxs)("div",{className:"fullscreen-layout",children:[Object(c.jsx)("div",{className:"fullscreen-layout__header",children:e.header}),Object(c.jsx)("div",{className:"fullscreen-layout__content",children:e.children}),Object(c.jsx)("div",{className:"fullscreen-layout__footer",children:e.footer})]})},j=function(){return Object(c.jsxs)("nav",{className:"navbar is-info",role:"navigation","aria-label":"main navigation",children:[Object(c.jsx)("div",{className:"navbar-brand",children:Object(c.jsxs)("h1",{className:"navbar-item is-flex-direction-column",children:[Object(c.jsx)("span",{className:"title is-4 mb-4 has-text-white",children:"Tile Mosaic"}),Object(c.jsx)("span",{className:"subtitle is-6 is-uppercase is-bold has-text-light",children:"Generator"})]})}),Object(c.jsx)("div",{className:"navbar-menu",children:Object(c.jsxs)("div",{className:"navbar-start",children:[Object(c.jsx)(l.b,{to:"/",className:"navbar-item",children:"Generator"}),Object(c.jsx)(l.b,{to:"/tiles",className:"navbar-item",children:"Tiles"})]})})]})},d=function(){return Object(c.jsx)("footer",{className:"has-background-light p-3",children:Object(c.jsx)("div",{className:"content has-text-centered",children:Object(c.jsxs)("p",{className:"has-text-grey",children:[Object(c.jsx)("i",{children:"Tile Mosaic Generator"})," is created by Martin Omacht as a project for VIN course at Brno University of Technology in 2020."]})})})},b=n(7),O=Object(b.a)("panel-layout"),h=function(e){var t=e.horizontal;return Object(c.jsxs)("div",{className:O({horizontal:t,vertical:!t}),children:[Object(c.jsx)("div",{className:O("side"),children:e.left}),Object(c.jsx)("div",{className:O("content"),children:e.children}),Object(c.jsx)("div",{className:O("side"),children:e.right})]})},v=n(6),f="EDITOR_ADD_SHAPE",x="EDITOR_SET_GRID",p="EDITOR_SELECT_SHAPE",m="EDITOR_SELECT_TOOL",N="EDITOR_ELEM_PROP_CHANGE",k="EDITOR_SET_ELEMENTS",C="EDITOR_DELETE_ELEMENT",E="EDITOR_CLEAR";function y(e){return{type:f,shape:e}}function g(e){return{type:p,idx:e}}function I(e){return{type:m,tool:e}}function L(e){return{type:k,elements:e}}var T,P=n(11),S=n(10),R=n(17),_=n(18),Y=n(24),M=n(23);!function(e){e[e.CREATOR=0]="CREATOR",e[e.MANIPULATOR=1]="MANIPULATOR"}(T||(T={}));var A,H,w,D=function(){function e(){Object(R.a)(this,e)}return Object(_.a)(e,[{key:"onClick",value:function(e,t,n){return e}},{key:"onMouseMove",value:function(e,t,n){return e}},{key:"onMouseLeave",value:function(e,t,n){return e}},{key:"onShapeClick",value:function(e,t,n,c){return e}},{key:"onFinish",value:function(e,t){return e}},{key:"renderShape",value:function(e){return null}},{key:"toolType",value:function(){return T.CREATOR}},{key:"showHoverPoint",value:function(){return!0}}]),e}(),F=function(e){Object(Y.a)(n,e);var t=Object(M.a)(n);function n(){return Object(R.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"onClick",value:function(e,t,n){return t(g(null)),e}},{key:"onShapeClick",value:function(e,t,n,c){return t(g(n)),e}},{key:"showHoverPoint",value:function(){return!1}},{key:"toolType",value:function(){return T.MANIPULATOR}},{key:"getInitialState",value:function(){return{}}}]),n}(D),G=n(4);!function(e){e.TYPE_CIRCLE="CIRCLE",e.TYPE_LINE="LINE",e.TYPE_POLYGON="POLYGON",e.TYPE_POLYLINE="POLYLINE"}(H||(H={})),function(e){e[e.INTEGER=0]="INTEGER",e[e.FLOAT=1]="FLOAT",e[e.POINT=2]="POINT",e[e.COLOR=3]="COLOR"}(w||(w={}));var W,q,V=function(){var e=0;return function(){return++e}}(),z={strokeWidth:{label:"Stroke width",type:w.FLOAT},strokeColorId:{label:"Stroke color",type:w.COLOR}},U={fillColorId:{label:"Fill color",type:w.COLOR}},B=Object(G.a)(Object(G.a)({center:{label:"Center",type:w.POINT,required:!0},r:{label:"Radius",type:w.FLOAT,required:!0}},U),z),J=Object(G.a)({point1:{label:"Start point",type:w.POINT,required:!0},point12:{label:"End point",type:w.POINT,required:!0}},z),X=Object(G.a)(Object(G.a)({},z),U),K=z,Q=(A={},Object(S.a)(A,H.TYPE_LINE,J),Object(S.a)(A,H.TYPE_POLYGON,X),Object(S.a)(A,H.TYPE_POLYLINE,K),Object(S.a)(A,H.TYPE_CIRCLE,B),A),Z=function(e){return function(t){return null===e?void 0:t.palette[e]}},$=function(e){return e.palette},ee="#3298dc",te=function(e){var t,n=e.line,a=e.selected,r=Object(v.d)(Z(n.strokeColorId)),i=a?ee:r;return Object(c.jsx)("line",Object(G.a)({x1:n.point1.x,y1:n.point1.y,x2:n.point2.x,y2:n.point2.y,stroke:null!==i&&void 0!==i?i:"none",strokeWidth:null!==(t=n.strokeWidth)&&void 0!==t?t:0},e.eventHandlers))},ne=function(e){var t,n=e.polyline,a=e.selected,r=Object(v.d)(Z(n.strokeColorId)),i=a?ee:r;return Object(c.jsx)("polyline",Object(G.a)({points:n.points.map((function(e){return"".concat(e.x,",").concat(e.y)})).join(" "),stroke:null!==i&&void 0!==i?i:"none",strokeWidth:null!==(t=n.strokeWidth)&&void 0!==t?t:0,fill:"none"},e.eventHandlers))},ce=function(e){var t,n=e.circle,a=e.selected,r=Object(v.d)(Z(n.fillColorId)),i=a?ee:r,s=Object(v.d)(Z(n.strokeColorId));return Object(c.jsx)("circle",Object(G.a)({cx:n.center.x,cy:n.center.y,r:n.r,fill:null!==i&&void 0!==i?i:"none",stroke:null!==s&&void 0!==s?s:"none",strokeWidth:null!==(t=n.strokeWidth)&&void 0!==t?t:0},e.eventHandlers))},ae=function(e){var t,n=e.polygon,a=e.selected,r=Object(v.d)(Z(n.fillColorId)),i=a?ee:r,s=Object(v.d)(Z(n.strokeColorId));return Object(c.jsx)("polygon",Object(G.a)({points:n.points.map((function(e){return"".concat(e.x,",").concat(e.y)})).join(" "),fill:null!==i&&void 0!==i?i:"none",stroke:null!==s&&void 0!==s?s:"none",strokeWidth:null!==(t=n.strokeWidth)&&void 0!==t?t:0},e.eventHandlers))},re=function(e){var t=e.shape;switch(t.type){case H.TYPE_LINE:return Object(c.jsx)(te,{line:t,eventHandlers:e.eventHandlers,selected:e.selected});case H.TYPE_POLYLINE:return Object(c.jsx)(ne,{polyline:t,eventHandlers:e.eventHandlers,selected:e.selected});case H.TYPE_CIRCLE:return Object(c.jsx)(ce,{circle:t,eventHandlers:e.eventHandlers,selected:e.selected});case H.TYPE_POLYGON:return Object(c.jsx)(ae,{polygon:t,eventHandlers:e.eventHandlers,selected:e.selected});default:return null}},ie=function(e){Object(Y.a)(n,e);var t=Object(M.a)(n);function n(){return Object(R.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"onClick",value:function(e,t,n){return e.point1?(t(y(Object(G.a)(Object(G.a)({},e),{},{id:V()}))),this.getInitialState()):Object(G.a)(Object(G.a)({},e),{},{point1:n})}},{key:"onMouseMove",value:function(e,t,n){return e.point1?Object(G.a)(Object(G.a)({},e),{},{point2:n}):e}},{key:"renderShape",value:function(e){return e.point1&&e.point2?Object(c.jsx)(re,{shape:e}):null}},{key:"getInitialState",value:function(){return{type:H.TYPE_LINE,zIndex:0,strokeColorId:0,strokeWidth:2}}}]),n}(D),se=n(15),le=function(e){Object(Y.a)(n,e);var t=Object(M.a)(n);function n(){return Object(R.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"onClick",value:function(e,t,n){return Object(G.a)(Object(G.a)({},e),{},{points:e.points.concat(n)})}},{key:"onMouseMove",value:function(e,t,n){var c=Object(se.a)(e.points);return c.pop(),c.push(n),Object(G.a)(Object(G.a)({},e),{},{points:c})}},{key:"onFinish",value:function(e,t){var n=Object(se.a)(e.points);return n.pop(),t(y(Object(G.a)(Object(G.a)({},e),{},{points:n,id:V()}))),this.getInitialState()}},{key:"renderShape",value:function(e){return Object(c.jsx)(re,{shape:e})}},{key:"getInitialState",value:function(){return{type:H.TYPE_POLYLINE,zIndex:0,strokeColorId:0,strokeWidth:2,points:[],id:0}}}]),n}(D),oe=function(e){Object(Y.a)(n,e);var t=Object(M.a)(n);function n(){return Object(R.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"onClick",value:function(e,t,n){return e.center?(t(y(Object(G.a)(Object(G.a)({},e),{},{id:V()}))),this.getInitialState()):Object(G.a)(Object(G.a)({},e),{},{center:n})}},{key:"onMouseMove",value:function(e,t,c){return e.center?Object(G.a)(Object(G.a)({},e),{},{r:n.getDistance(e.center,c)}):e}},{key:"renderShape",value:function(e){return e.center&&e.r?Object(c.jsx)(re,{shape:e}):null}},{key:"getInitialState",value:function(){return{type:H.TYPE_CIRCLE,zIndex:0,fillColorId:0,strokeWidth:null,strokeColorId:null}}}],[{key:"getDistance",value:function(e,t){var n=t.x-e.x,c=t.y-e.y;return Math.sqrt(n*n+c*c)}}]),n}(D),ue=function(e){Object(Y.a)(n,e);var t=Object(M.a)(n);function n(){return Object(R.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"onClick",value:function(e,t,n){return e.points.length>0&&n.x===e.points[0].x&&n.y===e.points[0].y?this.onFinish(e,t):Object(G.a)(Object(G.a)({},e),{},{points:e.points.concat([n,n])})}},{key:"onMouseMove",value:function(e,t,n){if(0===e.points.length)return e;var c=Object(se.a)(e.points);return c.pop(),c.push(n),Object(G.a)(Object(G.a)({},e),{},{points:c})}},{key:"onFinish",value:function(e,t){var n=Object(se.a)(e.points);return n.pop(),t(y(Object(G.a)(Object(G.a)({},e),{},{points:n,id:V()}))),this.getInitialState()}},{key:"renderShape",value:function(e){return Object(c.jsx)(re,{shape:e})}},{key:"getInitialState",value:function(){return{type:H.TYPE_POLYGON,zIndex:0,fillColorId:0,points:[],strokeColorId:null,strokeWidth:null,id:0}}}]),n}(D);!function(e){e[e.SELECT=0]="SELECT",e[e.LINE=1]="LINE",e[e.POLYLINE=2]="POLYLINE",e[e.CIRCLE=3]="CIRCLE",e[e.POLYGON=4]="POLYGON"}(q||(q={}));var je=(W={},Object(S.a)(W,q.SELECT,new F),Object(S.a)(W,q.LINE,new ie),Object(S.a)(W,q.POLYLINE,new le),Object(S.a)(W,q.CIRCLE,new oe),Object(S.a)(W,q.POLYGON,new ue),W),de=function(e){return e.editor.gridSize},be=function(e){return e.editor.elements},Oe=function(e){return e.editor.selectedTool},he=function(e){return e.editor.selectedIdx},ve="TILES_SET_TILE",fe="TILES_DELETE_TILE",xe="TILES_SET_TILES";var pe=function(){var e=0;return function(){return++e}}(),me=[];var Ne=Object(b.a)("svg-editor"),ke=function(){var e=Object(v.c)(),t=Object(v.d)(Oe),n=Object(v.d)(be),r=Object(o.f)(),i=Object(o.g)(),s=i.id?parseInt(i.id):null,l=Object(a.useCallback)((function(){var t;e((t={id:null!==s?s:pe(),elements:n},{type:ve,tile:t})),r.push("/tiles")}),[n,e,r,s]);return Object(c.jsxs)("div",{className:Ne("toolbar"),children:[Object(c.jsx)("button",{className:"button",onClick:l,children:"Save"}),Object(c.jsxs)("div",{className:"buttons has-addons is-centered",children:[Object(c.jsx)("button",{className:"button"+(t===q.SELECT?" is-dark":""),onClick:function(){return e(I(q.SELECT))},children:"Select"}),Object(c.jsx)("button",{className:"button"+(t===q.LINE?" is-dark":""),onClick:function(){return e(I(q.LINE))},children:"Line"}),Object(c.jsx)("button",{className:"button"+(t===q.POLYLINE?" is-dark":""),onClick:function(){return e(I(q.POLYLINE))},children:"Polyline"}),Object(c.jsx)("button",{className:"button"+(t===q.CIRCLE?" is-dark":""),onClick:function(){return e(I(q.CIRCLE))},children:"Circle"}),Object(c.jsx)("button",{className:"button"+(t===q.POLYGON?" is-dark":""),onClick:function(){return e(I(q.POLYGON))},children:"Polygon"})]})]})},Ce=function(e){var t=Object(a.useState)(e.initialValue),n=Object(P.a)(t,2),r=n[0],i=n[1],s=Object(a.useCallback)((function(t){var n=t.target.value;if(""===n){if(e.required)return;return i(null),void e.onChange(null)}var c=parseInt(n);i(c),e.onChange(c)}),[i,e.onChange,e.required]);return Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("input",{type:"number",className:"input",onChange:s,value:null!==r&&void 0!==r?r:""})})},Ee=function(e){var t=Object(a.useState)(e.initialValue),n=Object(P.a)(t,2),r=n[0],i=n[1],s=Object(a.useCallback)((function(t){var n=t.target.value;if(""===n){if(e.required)return;return i(null),void e.onChange(null)}i(n);var c=parseFloat(t.target.value);isNaN(c)||e.onChange(c)}),[i,e.onChange,e.required]);return Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("input",{type:"number",className:"input",onChange:s,value:null!==r&&void 0!==r?r:"",step:"0.1"})})},ye=function(e){var t,n,r=Object(a.useState)(e.initialValue),i=Object(P.a)(r,2),s=i[0],l=i[1],o=Object(a.useCallback)((function(t){var n,c=t.target.name,a=null!==(n=t.target.value)&&void 0!==n?n:null;if(null!==a||!e.required){l(Object(G.a)(Object(G.a)({},s),{},Object(S.a)({},c,a)));var r=parseFloat(t.target.value),i=null===a?a:r;isNaN(i)||e.onChange(Object(G.a)(Object(G.a)({},s),{},Object(S.a)({},c,i)))}}),[s,l,e.onChange,e.required]);return Object(c.jsx)("div",{className:"control",children:Object(c.jsxs)("div",{className:"columns",children:[Object(c.jsxs)("div",{className:"column",children:[Object(c.jsx)("span",{children:"X"}),Object(c.jsx)("input",{type:"number",className:"input",name:"x",onChange:o,value:null!==(t=null===s||void 0===s?void 0:s.x)&&void 0!==t?t:""})]}),Object(c.jsxs)("div",{className:"column",children:[Object(c.jsx)("span",{children:"Y"}),Object(c.jsx)("input",{type:"number",className:"input",name:"y",onChange:o,value:null!==(n=null===s||void 0===s?void 0:s.y)&&void 0!==n?n:""})]})]})})};var ge=n(105),Ie=n(106),Le=n(107),Te="#000",Pe={0:Te},Se=function(){var e=0;return function(){return++e}}();var Re=Object(b.a)("palette-picker"),_e=function(){return Object(c.jsxs)("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:Re("colornone"),children:[Object(c.jsx)("polyline",{points:"0,0 100,0 100,100 0,100 0,0",stroke:"#000",strokeWidth:"2",fill:"none"}),Object(c.jsx)("line",{x1:"100",y1:"0",x2:"0",y2:"100",stroke:"#000",strokeWidth:"2"}),Object(c.jsx)("line",{x1:"0",y1:"0",x2:"100",y2:"100",stroke:"#000",strokeWidth:"2"})]})},Ye=r.a.forwardRef((function(e,t){var n=e.id,r=e.color,i=e.canEdit,s=e.onDelete,l=e.onSelect,o=e.selected,u=Object(a.useState)(!1),j=Object(P.a)(u,2),d=j[0],b=j[1],O=Object(v.c)(),h=Object(a.useCallback)((function(){b(!0)}),[b]),f=Object(a.useCallback)((function(){b(!1)}),[b]),x=Object(a.useCallback)((function(e){O(function(e,t){return{type:"PALETTE_UPDATE_COLOR",id:e,color:t}}(n,e.hex))}),[O,n]);return Object(c.jsxs)("div",{ref:t,onClick:function(){return l&&l(n)},className:Re("item",o?["active"]:[]),children:[Object(c.jsxs)("div",{className:Re("info"),children:[Object(c.jsx)("span",{className:Re("thumb"),style:{backgroundColor:r},children:!r&&Object(c.jsx)(_e,{})}),Object(c.jsx)("span",{className:Re("label"),children:null!==r&&void 0!==r?r:"None"})]}),"number"===typeof n&&Object(c.jsxs)("div",{className:Re("actions"),children:[i&&Object(c.jsx)("button",{onClick:h,className:Re("action",["edit"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-pen"})})}),s&&Object(c.jsx)("button",{onClick:function(){return s(n)},className:Re("action",["delete"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-trash"})})})]}),d&&Object(c.jsxs)("div",{className:Re("popover"),children:[Object(c.jsx)("div",{className:Re("overlay"),onClick:f}),Object(c.jsx)(ge.a,{color:r,onChangeComplete:x})]})]})})),Me=function(e){var t=Object(a.useState)(e.initialValue),n=Object(P.a)(t,2),r=n[0],i=n[1],s=Object(v.d)($),l=Object.keys(s).map((function(e){return parseInt(e,10)})),o=Object(a.useRef)(),u=Object(v.c)(),j=Object(a.useCallback)((function(t){i(t),e.onChange(t)}),[i,e.onChange]),d=Object(a.useCallback)((function(e){u(function(e){return{type:"PALETTE_REMOVE_COLOR",id:e}}(e))}),[u]),b=Object(a.useCallback)((function(){u({type:"PALETTE_ADD_COLOR",id:Se(),color:Te})}),[u]);return Object(a.useEffect)((function(){var e;null===(e=o.current)||void 0===e||e.scrollIntoView()}),[]),Object(c.jsx)("div",{className:Re(),children:Object(c.jsxs)("div",{className:Re("input"),children:[!e.required&&Object(c.jsx)(Ye,{id:null,onSelect:j,selected:null===r}),l.map((function(e){return Object(c.jsx)(Ye,{id:e,color:s[e],canEdit:!0,onDelete:0===e?void 0:d,onSelect:j,selected:r===e,ref:r===e?o:void 0},e)})),Object(c.jsxs)("div",{onClick:b,className:Re("item",["new"]),children:[Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-plus"})}),"Add color"]})]})})},Ae=Object(b.a)("scrollable"),He=function(e){return Object(c.jsx)("div",{className:Ae(),children:Object(c.jsx)("div",{className:Ae("content"),children:e.children})})},we=Object(b.a)("svg-properties"),De=function(e){var t=Object(v.c)(),n=Object(a.useCallback)((function(n){t(function(e,t,n){return{type:N,elemIdx:e,propName:t,value:n}}(e.shapeIdx,e.propName,n))}),[e.shapeIdx,e.propName,t]),r=Object(a.useCallback)((function(t){var n=t.initialValue,a=t.onChange,r=t.required;switch(e.property.type){case w.INTEGER:return Object(c.jsx)(Ce,{initialValue:n,onChange:a,required:r});case w.FLOAT:return Object(c.jsx)(Ee,{initialValue:n,onChange:a,required:r});case w.POINT:return Object(c.jsx)(ye,{initialValue:n,onChange:a,required:r});case w.COLOR:return Object(c.jsx)(Me,{initialValue:n,onChange:a,required:r});default:return null}}),[e.property.type,e.shapeIdx]);return Object(c.jsxs)("div",{className:"field",children:[Object(c.jsx)("label",{className:"label",children:e.property.label}),Object(c.jsx)(r,{initialValue:e.initialValue,onChange:n})]})},Fe=function(e){var t,n=Object(v.d)((t=e.shapeIdx,function(e){return e.editor.elements[t]}));if(!n)return null;var a=Q[n.type],r=Object.keys(a);return Object(c.jsx)("div",{children:r.map((function(t){return Object(c.jsx)(De,{property:a[t],propName:t,initialValue:n[t],shapeIdx:e.shapeIdx},t)}))})},Ge=function(){var e=Object(v.d)(he);return Object(c.jsx)("div",{className:we(),children:Object(c.jsxs)(He,{children:[Object(c.jsx)("h2",{className:"title "+we("title"),children:"Properties"}),null===e?Object(c.jsx)("p",{className:we("text",["unselected"]),children:"No shape selected"}):Object(c.jsx)(Fe,{shapeIdx:e})]})})},We=function(e){return Object(c.jsxs)("svg",Object(G.a)(Object(G.a)({ref:e.svgRef,viewBox:"0 0 100 100",className:e.blk("svg")},e.eventHandlers),{},{children:[e.children,e.overlay&&Object(c.jsx)("g",{className:"no-pointer-events",children:e.overlay})]}))},qe=function(e){var t=100/e.gridSize+1,n=e.gridSize,a=Array(t).fill(0);return Object(c.jsxs)(c.Fragment,{children:[a.map((function(e,t){return Object(c.jsx)("line",{x1:0,y1:t*n,x2:100,y2:t*n,stroke:"#999",strokeOpacity:.5,strokeWidth:1,vectorEffect:"non-scaling-stroke"},t)})),a.map((function(e,t){return Object(c.jsx)("line",{y1:0,x1:t*n,y2:100,x2:t*n,stroke:"#999",strokeOpacity:.5,strokeWidth:1,vectorEffect:"non-scaling-stroke"},t)}))]})},Ve=function(e){return e.tiles},ze=Object(b.a)("svg-editor"),Ue=function(){var e=function(){var e=Object(a.useState)(null),t=Object(P.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),i=Object(P.a)(r,2),s=i[0],l=i[1];return[Object(a.useCallback)((function(e){null!==e&&(c(e),l(e.createSVGPoint()))}),[c]),Object(a.useCallback)((function(e,t){var c;if(null===s)return{x:0,y:0};s.x=e.clientX,s.y=e.clientY;var a=s.matrixTransform(null===(c=n.getScreenCTM())||void 0===c?void 0:c.inverse());return{x:Math.round(a.x/t)*t,y:Math.round(a.y/t)*t}}),[s,n])]}(),t=Object(P.a)(e,2),n=t[0],r=t[1],i=Object(v.d)(de),s=Object(v.d)(Oe),l=Object(v.d)(he),u=Object(v.d)(be),j=Object(a.useState)(null),d=Object(P.a)(j,2),b=d[0],O=d[1],h=function(e){var t=Object(v.c)(),n=Object(a.useState)(je[e]),c=Object(P.a)(n,2),r=c[0],i=c[1],s=Object(a.useState)(r.getInitialState()),l=Object(P.a)(s,2),o=l[0],u=l[1];Object(a.useEffect)((function(){i(je[e]),u(je[e].getInitialState())}),[e]);var j=Object(a.useCallback)((function(e){u(r.onClick(o,t,e))}),[o,t,u,r]),d=Object(a.useCallback)((function(e){u(r.onMouseMove(o,t,e))}),[o,t,u,r]),b=Object(a.useCallback)((function(e){u(r.onMouseLeave(o,t,e))}),[o,t,u,r]),O=Object(a.useCallback)((function(e,n){u(r.onShapeClick(o,t,e,n))}),[o,t,u,r]);return{svgEventHandlers:{onClick:j,onMouseMove:d,onMouseLeave:b,onFinish:Object(a.useCallback)((function(){u(r.onFinish(o,t))}),[o,t,u,r])},onShapeClick:O,renderedShape:r.renderShape(o),showHoverPoint:r.showHoverPoint(),toolType:r.toolType()}}(s),f=Object(v.c)(),x=Object(o.g)(),p=x.id?parseInt(x.id):null,m=Object(v.d)(function(e){return function(t){return t.tiles.find((function(t){return t.id===e}))}}(p)),N=Object(a.useCallback)((function(e){var t=r(e,i);h.svgEventHandlers.onClick(t)}),[r,i,h.svgEventHandlers.onClick]),k=Object(a.useCallback)((function(e){var t=r(e,i);O(t)}),[i,r]),C=Object(a.useCallback)((function(e){O(null),h.svgEventHandlers.onMouseLeave(r(e,i))}),[O,r,i,h.svgEventHandlers.onMouseLeave]),y=Object(a.useCallback)((function(e,t){h.toolType===T.MANIPULATOR&&(e.stopPropagation(),h.onShapeClick(t,u[t]))}),[h.onShapeClick,u]),g=Object(a.useCallback)((function(e){e.preventDefault(),h.svgEventHandlers.onFinish()}),[h.svgEventHandlers.onFinish]);return Object(a.useEffect)((function(){b&&h.svgEventHandlers.onMouseMove(b)}),[b]),Object(a.useEffect)((function(){f({type:E}),null!==p&&m&&f(L(m.elements))}),[p,m,f]),Object(c.jsxs)(We,{svgRef:n,blk:ze,eventHandlers:{onClick:N,onMouseMove:k,onMouseLeave:C,onContextMenu:g},overlay:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(qe,{gridSize:i}),b&&h.showHoverPoint&&Object(c.jsx)("circle",{cx:b.x,cy:b.y,r:1,stroke:"black",strokeWidth:2,vectorEffect:"non-scaling-stroke"})]}),children:[u.map((function(e,t){return Object(c.jsx)(re,{selected:t===l,shape:e,eventHandlers:{onClick:function(e){return y(e,t)}}},e.id)})),h.renderedShape]})},Be=n(26);function Je(e,t,n){var c=Array.from(e),a=c.splice(t,1),r=Object(P.a)(a,1)[0];return c.splice(n,0,r),c}var Xe=Object(b.a)("svg-element-viewer"),Ke=function(e){var t="Unknown";switch(e.type){case H.TYPE_POLYGON:t="Polygon";break;case H.TYPE_CIRCLE:t="Circle";break;case H.TYPE_POLYLINE:t="Polyline";break;case H.TYPE_LINE:t="Line"}return"".concat(t," #").concat(e.id)},Qe=function(){var e=Object(v.d)(be),t=Object(v.d)(he),n=Object(v.c)(),r=Object(a.useCallback)((function(t,c){t.stopPropagation(),n(g(e.length-c-1))}),[n,e]),i=Object(a.useCallback)((function(t){t.destination&&n(L(Je(e,e.length-t.source.index-1,e.length-t.destination.index-1)))}),[e,n]),s=Object(a.useCallback)((function(e,t){e.stopPropagation(),n(function(e){return{type:C,id:e}}(t))}),[n]),l=Object(a.useCallback)((function(){n(g(null))}),[n]),o=Object(se.a)(e);return o.reverse(),Object(c.jsx)(Be.a,{onDragEnd:i,children:Object(c.jsx)("div",{className:Xe(),onClick:l,children:Object(c.jsx)(He,{children:Object(c.jsxs)("div",{className:Xe("content"),children:[Object(c.jsx)("h2",{className:"title",children:"Elements"}),Object(c.jsx)(Be.c,{droppableId:"elements",children:function(n,a){return Object(c.jsxs)("div",Object(G.a)(Object(G.a)({},n.droppableProps),{},{ref:n.innerRef,className:Xe("items"),children:[o.map((function(n,a){return Object(c.jsx)(Be.b,{draggableId:n.id.toString(),index:a,children:function(i){return Object(c.jsxs)("div",Object(G.a)(Object(G.a)(Object(G.a)({onClick:function(e){return r(e,a)},className:Xe("item",t===e.length-a-1?["active"]:[])},i.draggableProps),i.dragHandleProps),{},{ref:i.innerRef,children:[Object(c.jsxs)("div",{className:Xe("info"),children:[Object(c.jsx)("div",{className:Xe("thumb"),children:Object(c.jsx)(We,{blk:Xe,children:Object(c.jsx)(re,{shape:n})})}),Object(c.jsx)("div",{className:Xe("label"),children:Ke(n)})]}),Object(c.jsx)("div",{className:Xe("actions"),children:Object(c.jsx)("button",{onClick:function(e){return s(e,n.id)},className:Xe("action",["delete"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-trash"})})})})]}),n.id)}},n.id)})),n.placeholder]}))}})]})})})})},Ze=Object(b.a)("svg-editor"),$e=function(){return Object(c.jsx)("div",{className:Ze(),children:Object(c.jsx)(h,{horizontal:!0,left:Object(c.jsx)(Qe,{}),right:Object(c.jsx)(Ge,{}),children:Object(c.jsx)(h,{left:Object(c.jsx)(ke,{}),children:Object(c.jsx)("div",{className:Ze("wrap"),children:Object(c.jsx)(Ue,{})})})})})},et=function(){return Object(c.jsx)(u,{header:Object(c.jsx)(j,{}),footer:Object(c.jsx)(d,{}),children:Object(c.jsx)($e,{})})},tt=function(){return Object(c.jsx)(u,{header:Object(c.jsx)(j,{}),footer:Object(c.jsx)(d,{}),children:Object(c.jsx)("h1",{children:"Generator"})})},nt=Object(b.a)("tile-item"),ct=function(e){var t=e.onClick;return Object(c.jsx)("div",{onClick:t,className:nt(["new"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-plus fa-2x"})})})},at=function(e){var t=Object(v.c)(),n=Object(o.f)(),r=Object(a.useCallback)((function(){n.push("/tiles/".concat(e.tile.id))}),[e.tile,n]),i=Object(a.useCallback)((function(){var n;t((n=e.tile.id,{type:fe,id:n}))}),[e.tile,t]);return Object(c.jsxs)("div",{className:nt(),children:[Object(c.jsxs)("div",{className:nt("thumb"),children:[Object(c.jsx)(We,{blk:nt,children:e.tile.elements.map((function(e){return Object(c.jsx)(re,{shape:e},e.id)}))}),Object(c.jsxs)("div",{className:nt("actions"),children:[Object(c.jsx)("button",{onClick:r,className:nt("action",["edit"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-pen"})})}),Object(c.jsx)("button",{onClick:i,className:nt("action",["delete"]),children:Object(c.jsx)("span",{className:"icon",children:Object(c.jsx)("i",{className:"fas fa-trash"})})})]})]}),Object(c.jsx)("div",{className:nt("label"),children:Object(c.jsxs)("span",{className:"has-text-grey",children:["idx: ",e.idx]})})]})},rt=Object(b.a)("tiles"),it=function(){var e=Object(v.d)(Ve),t=Object(o.f)(),n=Object(a.useCallback)((function(){t.push("/tiles/new")}),[t]);return Object(c.jsx)(u,{header:Object(c.jsx)(j,{}),footer:Object(c.jsx)(d,{}),children:Object(c.jsx)(He,{children:Object(c.jsxs)("div",{className:rt(),children:[Object(c.jsxs)("div",{className:rt("heading"),children:[Object(c.jsx)("h1",{className:"title",children:"Tiles"}),Object(c.jsx)("p",{className:rt("actions"),children:Object(c.jsx)(l.c,{to:"/tiles/reorder",children:"Reorder"})})]}),Object(c.jsxs)("div",{className:rt("items"),children:[e.map((function(e,t){return Object(c.jsx)(at,{idx:t,tile:e},e.id)})),Object(c.jsx)(ct,{onClick:n})]})]})})})},st=Object(b.a)("reorder"),lt=function(){var e=Object(v.d)(Ve),t=Object(v.c)(),n=Object(a.useCallback)((function(n){n.destination&&t(function(e){return{type:xe,tiles:e}}(Je(e,n.source.index,n.destination.index)))}),[e,t]);return Object(c.jsx)(u,{header:Object(c.jsx)(j,{}),footer:Object(c.jsx)(d,{}),children:Object(c.jsx)(He,{children:Object(c.jsx)(Be.a,{onDragEnd:n,children:Object(c.jsxs)("div",{className:st(),children:[Object(c.jsxs)("div",{className:st("heading"),children:[Object(c.jsx)("h1",{className:"title",children:"Reorder tiles"}),Object(c.jsx)("p",{className:st("actions"),children:Object(c.jsx)(l.c,{to:"/tiles",children:"Back"})})]}),Object(c.jsx)("p",{className:"subtitle",children:"Reorder tiles by drag & drop"}),Object(c.jsxs)("div",{className:st("columns"),children:[Object(c.jsx)("div",{className:st("col",["idx"]),children:e.map((function(e,t){return Object(c.jsx)("div",{className:st("item",["idx"]),children:t})}))}),Object(c.jsx)(Be.c,{droppableId:"tiles",children:function(t,n){return Object(c.jsxs)("div",Object(G.a)(Object(G.a)({},t.droppableProps),{},{ref:t.innerRef,className:st("col",["items"]),children:[e.map((function(e,t){return Object(c.jsx)(Be.b,{draggableId:e.id.toString(),index:t,children:function(t){return Object(c.jsxs)("div",Object(G.a)(Object(G.a)(Object(G.a)({},t.dragHandleProps),t.draggableProps),{},{ref:t.innerRef,className:st("item",["tile"]),children:[Object(c.jsx)("div",{className:st("thumb"),children:Object(c.jsx)(We,{blk:st,children:e.elements.map((function(e){return Object(c.jsx)(re,{shape:e},e.id)}))})}),Object(c.jsxs)("div",{className:st("label"),children:["ID: ",e.id]})]}))}},e.id)})),t.placeholder]}))}})]})]})})})})};var ot=function(){return Object(c.jsx)(l.a,{children:Object(c.jsxs)(o.c,{children:[Object(c.jsx)(o.a,{path:"/tiles/new",children:Object(c.jsx)(et,{})}),Object(c.jsx)(o.a,{path:"/tiles/reorder",children:Object(c.jsx)(lt,{})}),Object(c.jsx)(o.a,{path:"/tiles/:id",children:Object(c.jsx)(et,{})}),Object(c.jsx)(o.a,{path:"/tiles",children:Object(c.jsx)(it,{})}),Object(c.jsx)(o.a,{path:"/",children:Object(c.jsx)(tt,{})})]})})},ut=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,233)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},jt=n(19),dt=n(104),bt={elements:[],gridSize:5,selectedTool:q.SELECT,selectedIdx:null};var Ot=Object(jt.combineReducers)({editor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:var n=e.elements.length,c=[].concat(Object(se.a)(e.elements),[t.shape]);return Object(G.a)(Object(G.a)({},e),{},{elements:c,selectedIdx:n});case x:return Object(G.a)(Object(G.a)({},e),{},{gridSize:t.size});case p:return Object(G.a)(Object(G.a)({},e),{},{selectedIdx:t.idx});case m:return Object(G.a)(Object(G.a)({},e),{},{selectedTool:t.tool});case N:return Object(G.a)(Object(G.a)({},e),{},{elements:e.elements.map((function(e,n){return n===t.elemIdx?Object(G.a)(Object(G.a)({},e),{},Object(S.a)({},t.propName,t.value)):e}))});case k:var a=null!==e.selectedIdx?t.elements.findIndex((function(t){var n;return t.id===e.elements[null!==(n=e.selectedIdx)&&void 0!==n?n:0].id})):null;return Object(G.a)(Object(G.a)({},e),{},{elements:t.elements,selectedIdx:a});case C:return Object(G.a)(Object(G.a)({},e),{},{elements:e.elements.filter((function(e){return e.id!==t.id}))});case E:return bt;default:return e}},palette:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PALETTE_ADD_COLOR":return Object(G.a)(Object(G.a)({},e),{},Object(S.a)({},t.id,t.color));case"PALETTE_REMOVE_COLOR":var n=t.id,c=(e[n],Object(Ie.a)(e,[n].map(Le.a)));return c;case"PALETTE_UPDATE_COLOR":return Object(G.a)(Object(G.a)({},e),{},Object(S.a)({},t.id,t.color));default:return e}},tiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:var n=e.findIndex((function(e){return e.id===t.tile.id}));return n>=0?e.map((function(e){return e.id===t.tile.id?Object(G.a)({},t.tile):e})):[].concat(Object(se.a)(e),[t.tile]);case fe:return e.filter((function(e){return e.id!==t.id}));case xe:return Object(se.a)(t.tiles);default:return e}}}),ht=Object(jt.createStore)(Ot,Object(dt.composeWithDevTools)());n(224),n(228),n(229),n(230);s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(v.a,{store:ht,children:Object(c.jsx)(ot,{})})}),document.getElementById("root")),ut()}},[[231,1,2]]]);
//# sourceMappingURL=main.8bf0f00f.chunk.js.map